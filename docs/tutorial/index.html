<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>gazel - documentation</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.png"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="/assets/css/stylesheet.css"><script data-n-head="ssr" src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script><script data-n-head="ssr" src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script><script data-n-head="ssr" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script><link rel="preload" href="/_nuxt/1971f5d.js" as="script"><link rel="preload" href="/_nuxt/f12e08d.js" as="script"><link rel="preload" href="/_nuxt/ef83327.js" as="script"><link rel="preload" href="/_nuxt/ccecb32.js" as="script"><link rel="preload" href="/_nuxt/e82329e.js" as="script"><link rel="preload" href="/_nuxt/de6aec2.js" as="script"><link rel="preload" href="/_nuxt/c309ceb.js" as="script"><style data-vue-ssr-id="5764bbd8:0 62108049:0 1a73ea6b:0 4735450f:0 1bf3c55b:0 45299806:0 3d57fece:0">.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;transform:scale(.25);transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;transform:scale(.25);transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;transform:scale(.25);transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{animation:fa-spin 2s linear infinite}.fa-pulse{animation:fa-spin 1s steps(8) infinite}@keyframes fa-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:currentColor;fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:currentColor;fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}code[class*=language-],pre[class*=language-]{color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#264f78}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#264f78}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;color:#db4c69;background:#1e1e1e}.namespace{opacity:.7}.token.doctype .token.doctype-tag{color:#569cd6}.token.doctype .token.name{color:#9cdcfe}.token.comment,.token.prolog{color:#6a9955}.language-html .language-css .token.punctuation,.language-html .language-javascript .token.punctuation,.token.punctuation{color:#d4d4d4}.token.boolean,.token.constant,.token.inserted,.token.number,.token.property,.token.symbol,.token.tag,.token.unit{color:#b5cea8}.token.attr-name,.token.builtin,.token.char,.token.deleted,.token.selector,.token.string{color:#ce9178}.language-css .token.string.url{text-decoration:underline}.token.entity,.token.operator{color:#d4d4d4}.token.operator.arrow{color:#569cd6}.token.atrule{color:#ce9178}.token.atrule .token.rule{color:#c586c0}.token.atrule .token.url{color:#9cdcfe}.token.atrule .token.url .token.function{color:#dcdcaa}.token.atrule .token.url .token.punctuation{color:#d4d4d4}.token.keyword{color:#569cd6}.token.keyword.control-flow,.token.keyword.module{color:#c586c0}.token.function,.token.function .token.maybe-class-name{color:#dcdcaa}.token.regex{color:#d16969}.token.important{color:#569cd6}.token.italic{font-style:italic}.token.constant{color:#9cdcfe}.token.class-name,.token.maybe-class-name{color:#4ec9b0}.token.console,.token.interpolation,.token.parameter{color:#9cdcfe}.token.boolean,.token.punctuation.interpolation-punctuation{color:#569cd6}.token.exports .token.maybe-class-name,.token.imports .token.maybe-class-name,.token.property,.token.variable{color:#9cdcfe}.token.escape,.token.selector{color:#d7ba7d}.token.tag{color:#569cd6}.token.cdata,.token.tag .token.punctuation{color:grey}.token.attr-name{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation{color:#ce9178}.token.attr-value .token.punctuation.attr-equals{color:#d4d4d4}.token.entity{color:#569cd6}.token.namespace{color:#4ec9b0}code[class*=language-javascript],code[class*=language-jsx],code[class*=language-tsx],code[class*=language-typescript],pre[class*=language-javascript],pre[class*=language-jsx],pre[class*=language-tsx],pre[class*=language-typescript]{color:#9cdcfe}code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#d4d4d4}.language-regex .token.anchor{color:#dcdcaa}.language-html .token.punctuation{color:grey}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight.line-highlight{background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;z-index:0}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.bg-light{background-color:#fff!important}code[class*=language-],pre[class*=language-]{background-color:#1a1b26;text-shadow:none;font-size:.9em;margin-bottom:1rem;border-radius:5px}#header-logo{max-width:150px}.topmenu-options{font-weight:700}.alert-message{max-width:20px;display:contents}.alert{border-bottom-width:7px;margin:1px 1px 1rem;border-radius:5px;padding:.9rem}.alert p{margin-bottom:0}.alert .col{padding-left:.9rem;padding-right:.9rem}.fa-solid{position:relative;top:5px}</style><link rel="preload" href="/_nuxt/static/1668606782/tutorial/state.js" as="script"><link rel="preload" href="/_nuxt/static/1668606782/tutorial/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1668606782/manifest.js" as="script">
  </head>
  <body data-spy="scroll" data-target=".idocs-navigation" data-offset="125" data-n-head="%7B%22data-spy%22:%7B%22ssr%22:%22scroll%22%7D,%22data-target%22:%7B%22ssr%22:%22.idocs-navigation%22%7D,%22data-offset%22:%7B%22ssr%22:%22125%22%7D%7D">
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="main-wrapper"><div><header id="header" class="sticky-top"><nav class="primary-menu navbar navbar-expand-lg bg-light navbar-text-dark navbar-dropdown-light border-0"><div class="container-fluid"><button id="sidebarCollapse" type="button" class="navbar-toggler d-block d-md-none show"><span></span> <span class="w-75"></span> <span></span></button> <a href="/" title="Gazel documentation" class="logo ml-md-2"><img id="header-logo" src="/main_logo_1x.png" alt="Gazel documentation"></a> <button type="button" data-toggle="collapse" data-target="#header-nav" class="navbar-toggler ml-auto"><span></span><span></span><span></span></button> <div id="header-nav" class="collapse navbar-collapse justify-content-end"><ul class="navbar-nav"><li><a href="/tutorial" aria-current="page" class="topmenu-options nuxt-link-exact-active nuxt-link-active">
              Tutorial
            </a></li><li><a href="/conventions" class="topmenu-options">
              Conventions
            </a></li><li><a href="/setup" class="topmenu-options">
              Setup
            </a></li><li><a href="/architecture" class="topmenu-options">
              Architecture
            </a></li><li><a href="/features" class="topmenu-options">
              Features
            </a></li><li><a href="/release-notes" class="topmenu-options">
              Release Notes
            </a></li></ul></div> <ul class="social-icons social-icons-sm ml-lg-2 mr-2"><li class="social-icons-github"><a data-toggle="tooltip" href="https://github.com/multinetinventiv/gazel" target="_blank" data-original-title="Github"><i class="fab fa-github"></i></a></li></ul></div></nav></header> <div id="content" role="main"><div class="idocs-navigation bg-light active"><ul class="nav flex-column"><li class="nav-item"><a href="#index" class="nav-link">Getting Started</a> <ul class="nav flex-column"></ul></li><li class="nav-item"><a href="#hello-world" class="nav-link">Hello World</a> <ul class="nav flex-column"><li class="nav-item"><a href="#create-a-hello-world-service" class="nav-link">Create a Hello World Service</a></li><li class="nav-item"><a href="#writing-a-unit-test" class="nav-link">Writing a Unit Test</a></li><li class="nav-item"><a href="#summary-of-hello-world" class="nav-link">Summary </a></li></ul></li><li class="nav-item"><a href="#persistent-classes" class="nav-link">Persistent Classes</a> <ul class="nav flex-column"><li class="nav-item"><a href="#create-a-persistent-class" class="nav-link">Create A Persistent Class</a></li><li class="nav-item"><a href="#testing-persistent-objects" class="nav-link">Testing Persistent Objects</a></li><li class="nav-item"><a href="#summary-of-persistent-classes" class="nav-link">Summary </a></li></ul></li><li class="nav-item"><a href="#database-transactions" class="nav-link">Database Transactions</a> <ul class="nav flex-column"><li class="nav-item"><a href="#business-service-on-persistent-objects" class="nav-link">Business Service on Persistent Objects</a></li><!----><li class="nav-item"><a href="#testing-an-update-service" class="nav-link">Testing an Update Service</a></li><li class="nav-item"><a href="#summary-of-database-transactions" class="nav-link">Summary </a></li></ul></li><li class="nav-item"><a href="#query-classes" class="nav-link">Query Classes</a> <ul class="nav flex-column"><li class="nav-item"><a href="#create-a-query-service" class="nav-link">Create a Query Service</a></li><li class="nav-item"><a href="#testing-queries" class="nav-link">Testing Queries</a></li><li class="nav-item"><a href="#summary-of-query-classes" class="nav-link">Summary </a></li></ul></li><li class="nav-item"><a href="#rest-api" class="nav-link">Rest API</a> <ul class="nav flex-column"><li class="nav-item"><a href="#define-a-service-interface" class="nav-link">Define a Service Interface</a></li><li class="nav-item"><a href="#create-an-api-package" class="nav-link">Create an API Package</a></li><li class="nav-item"><a href="#test-your-first-endpoint" class="nav-link">Test your first endpoint</a></li><!----><li class="nav-item"><a href="#improve-your-api-package" class="nav-link">Improve your API Package</a></li><li class="nav-item"><a href="#summary-of-rest-api" class="nav-link">Summary </a></li></ul></li><li class="nav-item"><a href="#sample-application" class="nav-link">Sample Application</a> <ul class="nav flex-column"><li class="nav-item"><a href="#more-reading" class="nav-link">More Reading</a></li></ul></li></ul></div> <div class="idocs-content"><div class="container"><div><div><section id="index"><h1 class="article-title">Getting Started</h1></section> <div class="nuxt-content"><p>This is a tutorial that aims to help you to understand how to write a backend
using Gazel. Before you begin, you need to create an empty solution.</p>
<p>You may download an <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/empty" rel="nofollow noopener noreferrer" target="_blank">empty solution</a> to start right away. Once you open this
solution, directory structure should look like this:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
</code></pre></div>
<p>If you want to create an empty solution on your own, have a look at below
pages;</p>
<ul>
<li><a href="/setup#create-a-solution">Create a solution</a></li>
<li><a href="/setup#add-a-module">Add a module</a></li>
</ul>
<p>Basically, you will need to create a new solution named <code>Inventiv.Sample</code> and
add a new business module named <code>Inventiv.Sample.Module.Todo</code>.</p>
<p>Now that you have done this, you are ready to get started ðŸš€</p></div></div><div><section id="hello-world"><h1 class="article-title">Hello World</h1></section> <div class="nuxt-content"><p>In this tutorial, you will create a hello world service to have a quick feeling
on how Gazel works.</p>
<h2 id="create-a-hello-world-service"><a href="#create-a-hello-world-service" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create a Hello World Service</h2>
<p>To create a new business service, create a class named <code>TodoManager</code> in
<code>Inventiv.Sample.Module.Todo</code> project.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â”‚       â””â”€â”€ TodoManager.cs
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
</code></pre></div>
<p>Now add a new method called <code>SayHello</code> to <code>TodoManager</code> class as shown below.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoManager</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p><code>public</code> instance methods of classes within <em>module</em> projects are directly
exposed as business <em>services</em>.</p>
</div></div></div>
<p>Now run <code>Inventiv.Sample.App.Service</code> project, and you will see a test page to
be able to test your services.</p>
<p>On the left you will see that Gazel has rendered your <code>Todo</code> <em>module</em> and
listed <code>TodoManager</code> class as a <em>service package</em>, and under <code>Todo Manager</code> it
lists your <code>SayHello</code> method as a <em>business service</em>. Click <code>Say Hello</code> and
press <code>Call</code> button to make a test service request. When you do, you will see a
response saying <code>Hello World</code>.</p>
<p><img alt="" src="/assets/images/content/-images/tutorial/hello-world-service.png"></p>
<h2 id="writing-a-unit-test"><a href="#writing-a-unit-test" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Writing a Unit Test</h2>
<p>Now that you have implemented the most basic business service, it is time to
test it.</p>
<p>Create a class named <code>TodoTest</code> in <code>Inventiv.Sample.Test.Todo</code> project.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â”‚       â””â”€â”€ TodoManager.cs
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
        â””â”€â”€ TodoTest.cs
</code></pre></div>
<p>Write below code within this class;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Gazel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Gazel<span class="token punctuation">.</span>UnitTesting</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Test<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TestFixture</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TestBase</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token function">TodoTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Config<span class="token punctuation">.</span>RootNamespace <span class="token operator">=</span> <span class="token string">"Inventiv"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SayHello__says_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> todoManager <span class="token operator">=</span> Context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TodoManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">,</span> todoManager<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p><code>Context</code> property comes from <code>TestBase</code> which allows you to access IoC
container. Manager classes are singleton by convention, so you can access to
<code>TodoManager</code> instance by <code>Context.Get&lt;TodoManager>()</code>.</p>
</div></div></div>
<p>That's it. Now you can run this test to see if it succeeds.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Gazel uses NUnit for unit testing. For more information about NUnit see:
<a href="https://docs.nunit.org" rel="nofollow noopener noreferrer" target="_blank">NUnit Documentation</a></p>
</div></div></div>
<h2 id="summary-of-hello-world"><a href="#summary-summary-of-hello-world" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary </h2>
<p>As you can see no configuration is needed to create a new service. Once you've
created your solution and projects, every public class in <em>module</em> projects
becomes a service package and every public method becomes a service by
convention.</p>
<p>Now try to add new methods or add parameters, re-run and see the results.</p>
<p>Once you are ready, you can proceed to create your first database operation
using Gazel.</p>
<hr>
<p>Here you can download <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/tutorial/hello-world" rel="nofollow noopener noreferrer" target="_blank">source code for this tutorial</a>.</p></div></div><div><section id="persistent-classes"><h1 class="article-title">Persistent Classes</h1></section> <div class="nuxt-content"><p>In this tutorial, you will create a persistent class and make your first
database operation using Gazel.</p>
<h2 id="create-a-persistent-class"><a href="#create-a-persistent-class" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create A Persistent Class</h2>
<p>Database operations are done using <code>Persistent</code> objects.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>An object is <code>Persistent</code> if its class injects its own repository. For more
information see: <a href="/features#data-persistence">Data Persistence</a></p>
</div></div></div>
<p>Create a new class named <code>TaskCard</code> under <code>Todo</code> module.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â”‚       â”œâ”€â”€ TodoManager.cs
â”‚       â””â”€â”€ TaskCard.cs
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
        â””â”€â”€ TodoTest.cs
</code></pre></div>
<p>Add following code to your <code>TaskCard</code> source file.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Gazel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Gazel<span class="token punctuation">.</span>DataAccess</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IRepository<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span> repository <span class="token operator">=</span> <span class="token keyword">default</span><span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token function">TaskCard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">TaskCard</span><span class="token punctuation">(</span><span class="token class-name">IRepository<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span> repository<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>repository <span class="token operator">=</span> repository<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCards</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Query<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">TaskCards</span><span class="token punctuation">(</span><span class="token class-name">IModuleContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>Each <code>TaskCard</code> object will represent one row in <code>TaskCard</code> table.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p><code>TaskCards</code> class is registered to IoC as a singleton by convention and it
will consist of queries to that table. In this tutorial you will not write
any queries. Leave this class empty for now.</p>
</div></div></div>
<p><code>TaskCard</code> class, by injecting its own repository, indicates that its a
persistent class.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Notice that both classes are subject to dependency injection.</p>
<p><code>protected TaskCard() { }</code> constructor is there for NHibernate to create
proxies for lazy loading.</p>
</div></div></div>
<p>Now you can add properties to your <code>TaskCard</code> class as shown below;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> Completed <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>First property is mandatory for all persistent classes. Gazel requires an
integer Id column for every table.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>The reason for <code>protected</code> setters is to implement domain logic inside
persistent classes.</p>
<p><code>virtual</code> keywords are there for NHibernate to create proxies for lazy
loading.</p>
</div></div></div>
<p>These properties are automatically mapped to columns of <code>TaskCard</code> table in
<code>gazel.tutorial.db</code> database.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Note that you don't have to create tables and columns in your SQLite
database.  When in local development mode, Gazel configures NHibernate's
SQLite connection to automatically create database schema.</p>
</div></div></div>
<p>Now add following method to <code>TaskCard</code> class.</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">protected</span> <span class="token keyword">internal</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">TaskCard</span> <span class="token function">With</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        Completed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        repository<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>For persistent classes construction is in two steps. First step is the actual
constructor, and second step is <code>With</code> methods which takes instance arguments
and inserts a row to database via <code>repository</code>.</p>
<p>Go to <code>TodoManager</code> class in <code>Todo</code> module and modify its content with the
following code;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Gazel</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoManager</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IModuleContext</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">TodoManager</span><span class="token punctuation">(</span><span class="token class-name">IModuleContext</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">TaskCard</span> <span class="token function">CreateTaskCard</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> name<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">New</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">With</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>You've created a business service named <code>CreateTaskCard</code> that inserts a new
task card record with the given name. As mentioned above, construction is done
in two steps;</p>
<ol>
<li>The first one is <code>context.New&lt;TaskCard>()</code> which initiates a new <code>TaskCard</code>
object using IoC container,</li>
<li>And the second one is <code>.With(name)</code> which inserts a new record using its own
<code>repository</code>.</li>
</ol>
<p>So together you read this as "<strong>new task card with name</strong>".</p>
<p>Now run <code>App.Service</code> project to see your new service <code>Create Task Card</code> and
create task cards using it.</p>
<p><img alt=" " src="/assets/images/content/-images/tutorial/create-task-card.png"></p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Note that Id's are assigned from database. This is the default mapping
configuration Gazel applies to NHibernate.</p>
</div></div></div>
<h2 id="testing-persistent-objects"><a href="#testing-persistent-objects" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Testing Persistent Objects</h2>
<p>Go to <code>TodoTest</code> class in <code>Test.Todo</code> add following test case;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TestFixture</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TestBase</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CreateTaskCard__creates_a_task_card_using_given_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> todoManager <span class="token operator">=</span> Context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TodoManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">BeginTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> actual <span class="token operator">=</span> todoManager<span class="token punctuation">.</span><span class="token function">CreateTaskCard</span><span class="token punctuation">(</span><span class="token string">"Write Tests"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Verify<span class="token punctuation">.</span><span class="token function">ObjectIsPersisted</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">"Write Tests"</span><span class="token punctuation">,</span> actual<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<blockquote>
<p>You may remove <code>SayHello__says_hello</code> test case from previous tutorial.</p>
</blockquote>
<p>Here is what this test does in terms of AAA pattern;</p>
<ul>
<li><em>Arrange</em>: Gets <code>TodoManager</code> instance from context</li>
<li><em>Act</em>: Creates a task card named "Write Tests"</li>
<li><em>Assert</em>: Verifies that the <code>TaskCard</code> object is persisted and its name is
"Write Tests"</li>
</ul>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p><code>BeginTest()</code> call prepares underlying mechanism for the execution of service
under test.</p>
<p>Verify property comes from <code>TestBase</code> class. It basically helps you to check
if object is persisted or deleted.</p>
<p>When testing, Gazel configures a fake service application in which there is a
database connection to an in-memory SQLite database. For every test case, it
begins a transaction and rollbacks after execution.</p>
</div></div></div>
<h2 id="summary-of-persistent-classes"><a href="#summary-summary-of-persistent-classes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary </h2>
<p>Like manager classes, persistent classes also follow conventions. In this
tutorial you've created a table and a create service using no configuration.</p>
<p>Now try to add new properties to <code>TaskCard</code> class or add new persistent
classes, re-run and see the results.</p>
<p>Once you are ready, you can proceed to learn how to update a record in
database.</p>
<hr>
<p>Here you can download <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/tutorial/persistent-classes" rel="nofollow noopener noreferrer" target="_blank">source code for this tutorial</a>.</p></div></div><div><section id="database-transactions"><h1 class="article-title">Database Transactions</h1></section> <div class="nuxt-content"><p>In this tutorial, you will create an update service and learn about how Gazel
manages database transactions.</p>
<h2 id="business-service-on-persistent-objects"><a href="#business-service-on-persistent-objects" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Business Service on Persistent Objects</h2>
<p>Now that you've created task cards, it's time to complete them. To do this add
following method to your <code>TaskCard</code> class.</p>
<div class="nuxt-content-highlight"><pre class="language-csharp line-numbers"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Completed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>And that's it. You've created a <code>Complete</code> service.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>There is no need to create a database transaction, before every service call
Gazel automatically opens a database connection and begins a transaction.</p>
</div></div></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Notice that you don't have to call an update method in repository. Gazel
configures NHibernate in auto update mode. This means it makes a dirty check
upon commit and update rows when there is a change.</p>
</div></div></div>
<p>Build and run <code>App.Service</code> again. Now you will see a <code>TaskCard</code> service
package and under this package there is <code>Complete</code> service. Since this service
requires a row in database, <code>Id</code> parameter is added automatically.</p>
<p>Go and create a task card using <code>Task Manager / Create Task Card</code> and use that
object's <code>Id</code> in <code>Target/Id</code> field of <code>Complete</code> service.</p>
<p>When you press call button you will see following screen;</p>
<p><img alt="" src="/assets/images/content/-images/tutorial/complete-task.png"></p>
<h3 id="important-note-on-protected-setters"><a href="#important-note-on-protected-setters" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Important note on <code>protected</code> setters</h3>
<p>You may remember that we used <code>protected</code> access modifier on property setters
as shown below;</p>
<div class="nuxt-content-highlight"><pre class="language-csharp line-numbers"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">string</span><span class="token punctuation">?</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> Completed <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">protected</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
 <span class="token punctuation">}</span>
 <span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>As mentioned before <code>protected</code> setters ensure that data of a persistent object
can only be updated within its own class. Gazel is designed to welcome business
services on persistent classes.</p>
<p>If you allow <code>public</code> setters, that is fine too. But this would make it
possible to update a property value from outside. This is because we use auto
update feature of NHibernate.</p>
<p>Always remember that persistent objects in Gazel are not simle DTOs. They are
context aware domain objects that manages a row in a database.</p>
<h2 id="testing-an-update-service"><a href="#testing-an-update-service" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Testing an Update Service</h2>
<p>Let's move on to testing. Now add following test to your <code>TodoTest</code> test class;</p>
<div class="nuxt-content-highlight"><pre class="language-csharp line-numbers"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TestFixture</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TestBase</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Complete__marks_task_card_as_completed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> todoManager <span class="token operator">=</span> Context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TodoManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> taskCard <span class="token operator">=</span> todoManager<span class="token punctuation">.</span><span class="token function">CreateTask</span><span class="token punctuation">(</span><span class="token string">"Write Tests"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">BeginTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        taskCard<span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Assert<span class="token punctuation">.</span><span class="token function">IsTrue</span><span class="token punctuation">(</span>taskCard<span class="token punctuation">.</span>Completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>Here's what you've done;</p>
<ul>
<li><em>Arrange</em>: Get <code>TodoManager</code> object and create a task card named "Write
Tests"</li>
<li><em>Act</em>: Complete the new <code>TaskCard</code> object</li>
<li><em>Assert</em>: Assert that task card is completed</li>
</ul>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Note that this time <code>CreateTaskCard</code> is moved before <code>BeginTest()</code>. This is
because for this test case creating a task card is a part of the <em>arrange</em>
step.</p>
</div></div></div>
<h2 id="summary-of-database-transactions"><a href="#summary-summary-of-database-transactions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary </h2>
<p>In this tutorial you've learned how to write a simple update service to a
method. Now try to add new properties and methods to your persistent classes,
re-run and see the results.</p>
<p>Once you are ready, you can proceed to learn how to write query services.</p>
<hr>
<p>Here you can download <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/tutorial/database-transactions" rel="nofollow noopener noreferrer" target="_blank">source code for this tutorial</a>.</p></div></div><div><section id="query-classes"><h1 class="article-title">Query Classes</h1></section> <div class="nuxt-content"><p>In this tutorial, you will create a query service and learn about query service
conventions.</p>
<h2 id="create-a-query-service"><a href="#create-a-query-service" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create a Query Service</h2>
<p>Now you will create a query service to see all completed task cards. Add below
code to <code>TaskCards</code> class in <code>TaskCard.cs</code>.</p>
<div class="nuxt-content-highlight"><pre class="language-csharp line-numbers"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCards</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Query<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span> <span class="token function">ByCompleted</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> completed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">By</span><span class="token punctuation">(</span>t <span class="token operator">=></span> t<span class="token punctuation">.</span>Completed <span class="token operator">==</span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p><code>By</code> method is inherited from <code>Query&lt;T></code> base class, and it simply accepts a
lambda expression with one parameter of type <code>T</code> which is <code>TaskCard</code> in this
example.</p>
</div></div></div>
<p>Like every public method, this query method is also exposed as a business
service. Build and run <code>App.Service</code> to see your completed task cards.</p>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Query naming conventions;</p>
<ul>
<li>When a query method returns a list of objects, the convention is to name it
as <code>By</code>.</li>
<li>When a query method takes only one parameter, method name contains
parameter name as a suffix.</li>
</ul>
<p>So by these conventions we named this query as <code>ByCompleted</code>. For more
information see: <a href="/conventions#queries">Queries</a></p>
</div></div></div>
<h2 id="testing-queries"><a href="#testing-queries" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Testing Queries</h2>
<p>Now add following test case to your <code>TodoTest</code> class;</p>
<div class="nuxt-content-highlight"><pre class="language-csharp line-numbers"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">TestFixture</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">TestBase</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Test</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TaskCards_ByCompleted__filters_task_cards_by_completed_column</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> todoManager <span class="token operator">=</span> Context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TodoManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        todoManager<span class="token punctuation">.</span><span class="token function">CreateTask</span><span class="token punctuation">(</span><span class="token string">"incomplete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        todoManager<span class="token punctuation">.</span><span class="token function">CreateTask</span><span class="token punctuation">(</span><span class="token string">"completed 1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        todoManager<span class="token punctuation">.</span><span class="token function">CreateTask</span><span class="token punctuation">(</span><span class="token string">"completed 2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">BeginTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> actual <span class="token operator">=</span> Context<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TaskCards<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ByCompleted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> actual<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">"completed 1"</span><span class="token punctuation">,</span> actual<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Assert<span class="token punctuation">.</span><span class="token function">AreEqual</span><span class="token punctuation">(</span><span class="token string">"completed 2"</span><span class="token punctuation">,</span> actual<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Note that there is a <code>Context.Query&lt;T>()</code> shortcut to access query classes.
Unlike <code>Context.Get&lt;T>()</code> this shortcut is available in <em>module</em> projects as
well, so that you don't have to inject query classes.</p>
</div></div></div>
<h2 id="summary-of-query-classes"><a href="#summary-summary-of-query-classes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary </h2>
<p>Query classes help you to organize your query methods for the same persistent
class into one place, so that you can create reusable query methods.</p>
<p>Now try to create other query methods that accepts more than one parameter,
re-run and see the results.</p>
<p>Once you are ready, you can proceed to learn how to create service packages and
expose your business services publicly.</p>
<hr>
<p>Here you can download <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/tutorial/query-classes" rel="nofollow noopener noreferrer" target="_blank">source code for this tutorial</a>.</p></div></div><div><section id="rest-api"><h1 class="article-title">Rest API</h1></section> <div class="nuxt-content"><p>In this tutorial, you will create a Rest API and learn about configuration and
api packaging.</p>
<h2 id="define-a-service-interface"><a href="#define-a-service-interface" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Define a Service Interface</h2>
<p>Until now you've created business services for internal use. By internal we
mean that they are supposed to be consumed by your applications only. You can
always publish your business services directly to outside but this would be
hard for you to maintain and refactor your business code. For this reason, you
will create an api package out of your business services.</p>
<p>First we will define which services to expose. To do this, create a folder
named <code>Service</code> in <code>Todo</code> <em>module</em> and under this folder create an interface
named <code>ITaskCardService</code> as shown below;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â”‚       â”œâ”€â”€ Service
â”‚       â”‚   â””â”€â”€ ITaskCardService.cs
â”‚       â”œâ”€â”€ TodoManager.cs
â”‚       â””â”€â”€ TaskCard.cs
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
</code></pre></div>
<p>This interface is a <em>service interface</em> and it will contain the methods of
<code>TaskCard</code> class that you want to share with the outside world.</p>
<p>Now modify <code>ITaskCardService</code> service interface to include following method;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo<span class="token punctuation">.</span>Service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITaskCardService</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>Now go to <code>TaskCard.cs</code> file and make your <code>TaskCard</code> class implement
<code>ITaskCardService</code> interface as shown below;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ITaskCardService</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Notice that you don't have to implement <code>Complete</code> method, since it is
already implemented within <code>TaskCard</code> class.</p>
</div></div></div>
<h2 id="create-an-api-package"><a href="#create-an-api-package" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create an API Package</h2>
<p>To create an api package go to <code>App.Service</code> project and add a class named
<code>TaskCardApi</code> as shown below;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>Inventiv.Sample
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Rest
â”‚   â”œâ”€â”€ Inventiv.Sample.App.Service
â”‚   â”‚   â””â”€â”€ TaskCardApi.cs
â”‚   â””â”€â”€ Inventiv.Sample.Module.Todo
â”‚       â”œâ”€â”€ Service
â”‚       â”‚   â””â”€â”€ ITaskCardService.cs
â”‚       â”œâ”€â”€ TodoManager.cs
â”‚       â””â”€â”€ TaskCard.cs
â””â”€â”€ test
    â””â”€â”€ Inventiv.Sample.Test.Todo
</code></pre></div>
<p>And add below code to <code>TaskCardApi</code> class;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">Castle<span class="token punctuation">.</span>MicroKernel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Gazel<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo<span class="token punctuation">.</span>Service</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Routine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Routine<span class="token punctuation">.</span>Engine<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span>ConventionBased</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>App<span class="token punctuation">.</span>Service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCardApi</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICodingStyleConfiguration</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ConventionBasedCodingStyle</span> codingStyle<span class="token punctuation">,</span> <span class="token class-name">IKernel</span> kernel<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        codingStyle<span class="token punctuation">.</span><span class="token function">AddTypes</span><span class="token punctuation">(</span>v <span class="token operator">=></span> v<span class="token punctuation">.</span><span class="token function">ApiPackage</span><span class="token punctuation">(</span><span class="token string">"TaskCard"</span><span class="token punctuation">,</span> t <span class="token operator">=></span> t
            <span class="token punctuation">.</span>Methods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Proxy</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITaskCardService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TargetByParameter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>With this configuration, you've created a virtual class -which we call <em>api
package</em>- and added all methods in <code>ITaskCardService</code> class to this virtual
class.</p>
<p>Now build and run <code>App.Service</code> project.</p>
<p><img alt="" src="/assets/images/content/-images/tutorial/tutorials-rest-api-servicetestui.png"></p>
<p>As you can see, there is a new group called <code>Api</code>. Under this group you will
see a new api package named <code>ITaskCardService</code>. You can see that this service
package is marked as <code>Virtual</code> and <code>Web Service</code>. Under this package there is
'Complete' service.</p>
<h2 id="test-your-first-endpoint"><a href="#test-your-first-endpoint" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Test your first endpoint</h2>
<p>Now build and run both <code>App.Service</code> and <code>App.Rest</code> projects.</p>
<p><code>App.Rest</code> is an application that acts as a gateway to your internal business
services. It only allows access to the services under <code>Api</code> group.</p>
<p>Now your api is in this url;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-text"><code>POST http://localhost:{port}/task-cards/{id}/complete
</code></pre></div>
<p>Try your endpoint by making an HTTP request to this URL, and make sure you use
an id value from your test database in place of <code>{id}</code>.</p>
<p>We used <a href="https://www.getpostman.com" rel="nofollow noopener noreferrer" target="_blank">Postman</a> for this test, and the result is shown below;</p>
<p><img alt=" " src="/assets/images/content/-images/tutorial/tutorials-rest-api-postman-result.png"></p>
<h3 id="url-breakdown"><a href="#url-breakdown" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>URL breakdown</h3>
<p>Your api consists of 3 parts;</p>
<ol>
<li>Resource name in plural - <code>tasks</code></li>
<li>Id of the resource - <code>6</code></li>
<li>Operation/method name - <code>complete</code></li>
</ol>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Resource name is in plural because you named your web service package after a
persistent class, <code>TaskCard</code>.</p>
</div></div></div>
<h2 id="improve-your-api-package"><a href="#improve-your-api-package" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Improve your API Package</h2>
<p>Now modify <code>ITaskCardService.cs</code> file as shown below;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">Inventiv<span class="token punctuation">.</span>Sample<span class="token punctuation">.</span>Module<span class="token punctuation">.</span>Todo<span class="token punctuation">.</span>Service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITaskCardService</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITaskCardsService</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">ITaskCardInfo</span> <span class="token function">GetTaskCard</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> taskCardId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>ITaskCardInfo<span class="token punctuation">></span></span> <span class="token function">GetTaskCards</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> completed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITaskCardManagerService</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">ITaskCardInfo</span> <span class="token function">CreateTaskCard</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITaskCardInfo</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> Completed <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>There are 3 new interfaces in your service definition;</p>
<ol>
<li><code>ITaskCardsService</code> to include services from <code>TaskCards</code> query class.</li>
<li><code>ITaskCardManagerService</code> to include task card related services from
<code>TodoManager</code> manager class.</li>
<li><code>ITaskCardInfo</code> to include properties of <code>TaskCard</code> class in responses.</li>
</ol>
<p>Implement your new interfaces as shown below;</p>
<div class="nuxt-content-highlight"><span class="filename">TaskCard.cs</span><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCard</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ITaskCardService</span><span class="token punctuation">,</span> <span class="token class-name">ITaskCardInfo</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCards</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Query<span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">ITaskCardsService</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>

    <span class="token return-type class-name">ITaskCardInfo</span> ITaskCardsService<span class="token punctuation">.</span><span class="token function">GetTaskCard</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> taskCardId<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token function">SingleById</span><span class="token punctuation">(</span>taskCardId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>ITaskCardInfo<span class="token punctuation">></span></span> ITaskCardsService<span class="token punctuation">.</span><span class="token function">GetTaskCards</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> completed<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token function">ByCompleted</span><span class="token punctuation">(</span>completed<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Cast</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITaskCardInfo<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<div class="nuxt-content-highlight"><span class="filename">TodoManager.cs</span><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TodoManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ITaskCardManagerService</span></span>
<span class="token punctuation">{</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>

    <span class="token return-type class-name">ITaskCardInfo</span> ITaskCardManagerService<span class="token punctuation">.</span><span class="token function">CreateTaskCard</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span> <span class="token operator">=></span>
        <span class="token function">CreateTaskCard</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div> <div class="col">

<p>Notice that we make use of <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/interfaces/explicit-interface-implementation" rel="nofollow noopener noreferrer" target="_blank">Explicit Interface Implementation</a> to map
interface methods to class methods. This is required for methods of service
interfaces where return type in service interface is different than the
return type in implementing class. e.g. <code>CreateTaskCard</code> method returns
<code>TaskCard</code> in <code>TodoManager</code> class, but it returns <code>ITaskCardInfo</code> in
<code>ITaskCardManagerService</code> interface.</p>
</div></div></div>
<p>And finally add new interfaces to your api package;</p>
<div class="nuxt-content-highlight"><pre class="line-numbers language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskCardApi</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ICodingStyleConfiguration</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">ConventionBasedCodingStyle</span> codingStyle<span class="token punctuation">,</span> <span class="token class-name">IKernel</span> kernel<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        codingStyle<span class="token punctuation">.</span><span class="token function">AddTypes</span><span class="token punctuation">(</span>v <span class="token operator">=></span> v<span class="token punctuation">.</span><span class="token function">ApiPackage</span><span class="token punctuation">(</span><span class="token string">"TaskCard"</span><span class="token punctuation">,</span> t <span class="token operator">=></span> t
            <span class="token punctuation">.</span>Methods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Proxy</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITaskCardService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TargetByParameter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TaskCard<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>Methods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Proxy</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITaskCardsService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TargetBySingleton</span><span class="token punctuation">(</span>kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span>Methods<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Proxy</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ITaskCardManagerService<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">TargetBySingleton</span><span class="token punctuation">(</span>kernel<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre></div>
<p>Now rebuild and run both <code>App.Service</code> and <code>App.Rest</code> projects.</p>
<p>You now have 4 endpoints to test;</p>
<ol>
<li><code>POST /task-cards/{id}/complete</code> mapped to <code>ITaskCardService.Complete</code></li>
<li><code>GET /task-cards</code> or <code>GET /task-cards?completed={bool}</code> mapped to
<code>ITaskCardsService.GetTaskCards</code></li>
<li><code>GET /task-cards/{id}</code> mapped to <code>ITaskCardsService.GetTaskCard</code></li>
<li><code>POST /task-cards</code> mapped to <code>ITaskCardManagerService.CreateTaskCard</code></li>
</ol>
<blockquote>
<p>To test 4. endpoint you have to include a JSON request body like below. This
is because <code>CreateTaskCard</code> method accepts a parameter named <code>name</code>.</p>
</blockquote>
<div class="nuxt-content-highlight"><pre class="line-numbers language-json"><code><span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"task name goes here"</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h2 id="summary-of-rest-api"><a href="#summary-summary-of-rest-api" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary </h2>
<p>In this section you've learned how to create a Rest API out of your business
services.</p>
<p>Now try to create new persistent objects to enhance your to-do application.</p>
<p>You can move to next section to download a complete to-do application.</p>
<hr>
<p>Here you can download <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/tutorial/rest-api" rel="nofollow noopener noreferrer" target="_blank">source code for this tutorial</a></p></div></div><div><section id="sample-application"><h1 class="article-title">Sample Application</h1></section> <div class="nuxt-content"><p>This tutorial is only a small portion of how you can build a backend solution,
but there is much more to learn about Gazel.</p>
<p>Here you can download a complete <a href="https://github.com/multinetinventiv/gazel-samples/tree/main/to-do" rel="nofollow noopener noreferrer" target="_blank">to-do application</a> with all endpoints and
functionality. Examine it to have a better feeling of how you can build a
similar solution.</p>
<h2 id="more-reading"><a href="#more-reading" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>More Reading</h2>
<p>You can continue to read this documentation to have a deeper understanding of
how Gazel works.</p>
<ul>
<li>See <a href="/conventions">conventions</a> to see all conventions Gazel exposes.</li>
<li>See <a href="/architecture">architecture</a> to learn about the underlying architectural
design.</li>
<li>See <a href="/features">features</a> to learn what options you have and how to change
the way Gazel behaves.</li>
</ul></div></div></div></div></div></div></div></div></div></div><script defer src="/_nuxt/static/1668606782/tutorial/state.js"></script><script src="/_nuxt/1971f5d.js" defer></script><script src="/_nuxt/e82329e.js" defer></script><script src="/_nuxt/de6aec2.js" defer></script><script src="/_nuxt/c309ceb.js" defer></script><script src="/_nuxt/f12e08d.js" defer></script><script src="/_nuxt/ef83327.js" defer></script><script src="/_nuxt/ccecb32.js" defer></script>
  </body>
</html>
