<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:url" content="https://gazel.io">
<meta property="og:image" content="https://gazel.io/main_logo_1x.png">
<meta property="og:image:width" content="270">
<meta property="og:image:height" content="64">
<link rel="icon" type="image/png" href="/favicon.png">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/css/stylesheet.css">
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
<title>Gazel - Documentation</title>
<meta property="og:title" content="Gazel - Features">
<meta property="og:description" content="Features are built-in behaviours that can be customized through their configurers.">
<meta name="description" content="Features are built-in behaviours that can be customized through their configurers."><link rel="modulepreload" href="/features/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.85e3ed78.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.a0d0be30.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.2e66fbaa.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.8ba933ba.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.42b049ce.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.76accfa5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/states.1996c988.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_plugin-vue_export-helper.c27b6911.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...slug_.5e87b55e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.0a66f51d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.573c2c54.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/composables.8460782d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH1.5fabf45d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.52b53158.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.ddb44abf.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.a96de7fe.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.ddff8cc6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.5fb17151.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.12fbe270.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.e04bc725.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.9a069571.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.fb3fa225.js"><link rel="preload" as="style" href="/_nuxt/Alert.52f5ff90.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.485a4720.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.99efbd7e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.bb514741.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH4.377589e9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.c264cad4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseTable.1caf5078.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseThead.d3dad4c2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseTr.12023ae4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseTh.342cbb2a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseTbody.cb01ead8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseTd.4c093de2.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.51a15fce.js"><link rel="stylesheet" href="/_nuxt/Alert.52f5ff90.css"><style>pre{background-color:#1a1b26;border-radius:5px;font-size:.9em;margin-bottom:1rem;padding:1em;text-shadow:none}pre.mermaid{background-color:#fff}.bg-light{background-color:#fff!important}</style><style>#header-logo[data-v-70859e7a]{max-width:150px}.topmenu-options[data-v-70859e7a]{font-weight:700}</style><style>pre code .line{display:block;min-height:1rem}</style><style>.alert-message{display:contents;max-width:20px}.alert{border-bottom-width:7px;border-radius:5px;margin:1px 1px 1rem;padding:.9rem}.alert p{margin-bottom:0}.alert .col{padding-left:.9rem;padding-right:.9rem}.alert-message .fa-solid{position:relative;top:6px}</style></head>
<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125"><div id="__nuxt"><!--[--><div id="__layout"><div id="main-wrapper"><header id="header" class="sticky-top" data-v-70859e7a><nav class="primary-menu navbar navbar-expand-lg bg-light navbar-text-dark navbar-dropdown-light border-0" data-v-70859e7a><div class="container-fluid" data-v-70859e7a><button id="sidebar" class="navbar-toggler d-block d-md-none" type="button" data-v-70859e7a><span data-v-70859e7a></span><span class="w-75" data-v-70859e7a></span><span class="w-50" data-v-70859e7a></span></button><a href="/" class="logo ml-md-2" title="Gazel documentation" data-v-70859e7a><img id="header-logo" src="/main_logo_1x.png" alt="Gazel documentation" data-v-70859e7a></a><button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#header-nav" data-v-70859e7a><span data-v-70859e7a></span><span data-v-70859e7a></span><span data-v-70859e7a></span></button><div id="header-nav" class="collapse navbar-collapse justify-content-end" data-v-70859e7a><!--[--><ul class="navbar-nav" data-v-70859e7a><!--[--><li data-v-70859e7a><a href="/tutorial" class="topmenu-options" data-v-70859e7a>Tutorial</a></li><li data-v-70859e7a><a href="/conventions" class="topmenu-options" data-v-70859e7a>Conventions</a></li><li data-v-70859e7a><a href="/setup" class="topmenu-options" data-v-70859e7a>Setup</a></li><li data-v-70859e7a><a href="/architecture" class="topmenu-options" data-v-70859e7a>Architecture</a></li><li data-v-70859e7a><a aria-current="page" href="/features" class="router-link-active router-link-exact-active topmenu-options" data-v-70859e7a>Features</a></li><li data-v-70859e7a><a href="/release-notes" class="topmenu-options" data-v-70859e7a>Release Notes</a></li><!--]--></ul><!--]--></div><ul class="social-icons social-icons-sm ml-lg-2 mr-2" data-v-70859e7a><li class="social-icons-github" data-v-70859e7a><a href="https://github.com/multinetinventiv/gazel" rel="noopener noreferrer" target="_blank" data-toggle="tooltip" title data-original-title="Github" data-v-70859e7a><i class="fab fa-github" data-v-70859e7a></i></a></li></ul></div></nav></header><div id="content" role="main"><!--[--><!--[--><!--[--><!--[--><div class="idocs-navigation bg-light"><ul class="nav flex-column"><!--[--><li class="nav-item"><a class="nav-link" href="#">Features</a><ul class="nav flex-column"><!--[--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#audit">Audit</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#audit-auditing-business-services">Auditing Business Services</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#audit-auditing-persistent-classes">Auditing Persistent Classes</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#authentication">Authentication</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#authentication-isessionmanager-interface">ISessionManager interface</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#authentication-isession-interface">ISession interface</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#authentication-iaccount-interface">IAccount interface</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#authentication-accessing-user-session">Accessing User Session</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#authentication-overriding-current-session">Overriding Current Session</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#concurrency-limiter">Concurrency Limiter</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#concurrency-limiter-configuration">Configuration</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#concurrency-limiter-thread-count-calculation">Thread Count Calculation</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#crypto">Crypto</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#crypto-crypto-api">Crypto API</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#crypto-configuration">Configuration</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#exception-handling">Exception Handling</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#exception-handling-result-codes">Result Codes</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#exception-handling-response-status">Response Status</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#exception-handling-built-in-errors">Built-in Errors</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#exception-handling-customization">Customization</a></li><!--]--><!--[--><!----><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#file-system">File System</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#file-system-ifilesystem-interface">IFileSystem interface</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#file-system-configuration">Configuration</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#file-system-customization">Customization</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#configurations">Configurations</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-application-assemblies">Application Assemblies</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-application-session">Application Session</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-business-logic">Business Logic</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-command-line">Command Line</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-database">Database</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-gateway">Gateway</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-http-header">Http Header</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-rest-api">Rest Api</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-service">Service</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#configurations-service-client">Service Client</a></li><!--]--><!--]--></ul></li><li class="nav-item"><a class="nav-link" href="#options">Options</a><ul class="nav flex-column"><!--[--><!--[--><li class="nav-item"><a class="nav-link" href="#options-decimal-point">Decimal Point</a></li><!--]--><!--[--><li class="nav-item"><a class="nav-link" href="#options-utc">UTC</a></li><!--]--><!--]--></ul></li><!--]--></ul></div><div class="idocs-content"><div class="container"><section id="features"><div><h1 id="features"><!--[-->Features<!--]--></h1><p><!--[-->Features are built-in behaviours that can be customized through their
configurers. Small features can be named as <em><!--[-->Configuration<!--]--></em> or <em><!--[-->Option<!--]--></em>. When
they only configure an existing behaviour, such as <code><!--[-->DatabaseConfiguration<!--]--></code>, it
is a <em><!--[-->Configuration<!--]--></em>. When they provide nothing to configure other than
enable/disable, such as <code><!--[-->UtcOption<!--]--></code>, it is an <em><!--[-->Option<!--]--></em>.<!--]--></p><ul><!--[--><li><!--[--><a aria-current="page" href="/features#audit" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Audit<!--]--></strong><!--]--> <!----></a>: Audit your service requests and entities<!--]--></li><li><!--[--><a aria-current="page" href="/features#authentication" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Authentication<!--]--></strong><!--]--> <!----></a>: Learn what alternatives you have in
Gazel to provide authentication in your projects<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Authorization<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Cache<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#concurrency-limiter" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Concurrency Limiter<!--]--></strong><!--]--> <!----></a>: Provides a default
concurrency limiter for your backend to perform well under high loads.<!--]--></li><li><!--[--><a aria-current="page" href="/features#crypto" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Crypto<!--]--></strong><!--]--> <!----></a>: Crypto provides a built-in way to encrypt &amp; decrypt
sensitive data<!--]--></li><li><!--[--><a aria-current="page" href="/features#exception-handling" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Exception Handling<!--]--></strong><!--]--> <!----></a>: Gazel has a prebuilt code &amp;
message system that converts exceptions into data<!--]--></li><li><!--[--><a aria-current="page" href="/features#file-system" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->File System<!--]--></strong><!--]--> <!----></a>: File system gives a nice abstraction for
your application to read &amp; write file<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Hashing<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Localization<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Logging<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Message Queue<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Remote Call<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Secure Call<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Transaction<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><li><!--[--><a aria-current="page" href="/features#configurations" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Configurations<!--]--></strong><!--]--> <!----></a>: List of all <em><!--[-->configuration<!--]--></em> type
features<!--]--></li><li><!--[--><a aria-current="page" href="/features#options" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Options<!--]--></strong><!--]--> <!----></a>: List of all <em><!--[-->option<!--]--></em> type features<!--]--></li><li><!--[--><a aria-current="page" href="/features#" class="router-link-active router-link-exact-active"><!--[--><strong><!--[-->Implement a new feature<!--]--></strong><!--]--> <!----></a>: TBD<!--]--></li><!--]--></ul><p><!--[-->Below sample illustrates how you can configure a service application;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-79bf1c">builder</span><span class="ct-e31270">.</span><span class="ct-79bf1c">Services</span><span class="ct-e31270">.</span><span class="ct-92cc4c">AddGazelServiceApplication</span><span class="ct-e31270">(</span><span class="ct-79bf1c">cfg</span><span class="ct-e31270">,</span></span><span class="line"><span class="ct-e31270">    ...</span></span><span class="line"><span class="ct-e31270">    </span><span class="ct-79bf1c">service</span><span class="ct-e31270">: </span><span class="ct-79bf1c">c</span><span class="ct-e31270"> =&gt; ...,</span></span><span class="line"><span class="ct-e31270">    </span><span class="ct-79bf1c">audit</span><span class="ct-e31270">: </span><span class="ct-79bf1c">c</span><span class="ct-e31270"> =&gt; ...,</span></span><span class="line"><span class="ct-e31270">    </span><span class="ct-79bf1c">authentication</span><span class="ct-e31270">: </span><span class="ct-79bf1c">c</span><span class="ct-e31270"> =&gt; ...,</span></span><span class="line"><span class="ct-e31270">    ...</span></span><span class="line"><span class="ct-e31270">);</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Each application type have different set of features. To learn more about
applications and their features, please have a look at the
<a href="/architecture" class=""><!--[--><strong><!--[-->Architecture<!--]--></strong><!--]--> <!----></a> section.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->In this section we will go through every feature available in Gazel and explain
how you can configure them using their configurers.<!--]--></p><style>.ct-92cc4c{color:#DCDCAA}
.ct-e31270{color:#D4D4D4}
.ct-79bf1c{color:#9CDCFE}</style></div></section><!--[--><section id="audit"><div><h1 id="audit"><!--[-->Audit<!--]--></h1><p><!--[--><em><!--[-->Audit<!--]--></em> feature allows you to audit persistent classes and business services.
To configure this feature you can use <code><!--[-->Enabled()<!--]--></code> and <code><!--[-->Disabled()<!--]--></code> options.
Default option is <code><!--[-->Enabled()<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-aed0fa">audit</span><span class="ct-e4d7f1">: </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1"> =&gt; </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">Enabled</span><span class="ct-e4d7f1">()</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-aed0fa">audit</span><span class="ct-e4d7f1">: </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1"> =&gt; </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">Disabled</span><span class="ct-e4d7f1">()</span></span></code></pre><!--]--><h2 id="audit-auditing-business-services"><!--[-->Auditing Business Services<!--]--></h2><p><!--[-->Add <code><!--[-->[Audit]<!--]--></code> attribute to a business service method to make it auditable. When
a request is made to an audited business service, it will be intercepted and
several calls will be made to your <code><!--[-->IAuditManager<!--]--></code> implementation.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-e4d7f1">[</span><span class="ct-430292">Audit</span><span class="ct-e4d7f1">]</span></span><span class="line"><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">async</span><span class="ct-e4d7f1"> </span><span class="ct-430292">Task</span><span class="ct-e4d7f1"> </span><span class="ct-fb958d">RequestWithAudit</span><span class="ct-e4d7f1">() =&gt; ...;</span></span></code></pre><!--]--><h3 id="audit-implementing-iauditmanager"><!--[-->Implementing <code><!--[-->IAuditManager<!--]--></code><!--]--></h3><p><!--[-->For audit attribute to work, you need to have an implementation of
<code><!--[-->IAuditManager<!--]--></code> interface in one of your business modules. In this
implementation you can define the behaviour of audit feature.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">class</span><span class="ct-e4d7f1"> </span><span class="ct-430292">AuditManager</span><span class="ct-e4d7f1"> : </span><span class="ct-430292">IAuditManager</span></span><span class="line"><span class="ct-e4d7f1">{</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">void</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IAuditManager</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">SaveRequest</span><span class="ct-e4d7f1">(</span><span class="ct-430292">Guid</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">requestId</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceInstance</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceName</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceParameters</span><span class="ct-e4d7f1">) =&gt; ...;</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">void</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IAuditManager</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">SaveSuccessfulResponse</span><span class="ct-e4d7f1">(</span><span class="ct-430292">Guid</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">requestId</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceResponse</span><span class="ct-e4d7f1">) =&gt; ...;</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">void</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IAuditManager</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">SaveFailedResponse</span><span class="ct-e4d7f1">(</span><span class="ct-430292">Guid</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">requestId</span><span class="ct-e4d7f1">, </span><span class="ct-430292">Exception</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">exception</span><span class="ct-e4d7f1">) =&gt; ...;</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">int</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IAuditManager</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">GetDailyRequestCount</span><span class="ct-e4d7f1">(</span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceInstance</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceName</span><span class="ct-e4d7f1">, </span><span class="ct-430292">Date</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">date</span><span class="ct-e4d7f1">) =&gt; ...;</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">int</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IAuditManager</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">GetMaxDailyRequestCount</span><span class="ct-e4d7f1">(</span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceInstance</span><span class="ct-e4d7f1">, </span><span class="ct-8589f8">string</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">serviceName</span><span class="ct-e4d7f1">) =&gt; ...;</span></span><span class="line"><span class="ct-e4d7f1">}</span></span></code></pre><!--]--><ul><!--[--><li><!--[--><code><!--[-->SaveRequest()<!--]--></code>: During every request interceptor calls the <code><!--[-->SaveRequest()<!--]--></code>
method. You can use this method to keep a request log.<!--]--></li><li><!--[--><code><!--[-->SaveSuccessfulResponse()<!--]--></code>: You can use this method to save the information
of requests with successful response.<!--]--></li><li><!--[--><code><!--[-->SaveFailedResponse()<!--]--></code>: You can use this method to save the information of
requests with failed response.<!--]--></li><li><!--[--><code><!--[-->GetDailyRequestCount()<!--]--></code>: Using the request log stored in <code><!--[-->SaveRequest()<!--]--></code> you
can return the request count for each service.<!--]--></li><li><!--[--><code><!--[-->GetMaxDailyRequestCount()<!--]--></code>: You can use this method to limit number of
requests to a business service within a day.<!--]--></li><!--]--></ul><h3 id="audit-limiting-daily-request"><!--[-->Limiting Daily Request<!--]--></h3><p><!--[-->This feature is enabled by default to allow you to limit number of requests to
a business service within a day. When there is a service request, interceptor
uses <code><!--[-->GetDailyRequestCount()<!--]--></code> to get the daily request count and if it exceeds
the maximum daily request amount it will throw an exception.<!--]--></p><p><!--[-->You can disable this behaviour like below;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-aed0fa">audit</span><span class="ct-e4d7f1">: </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1"> =&gt; </span><span class="ct-c0fffb">c</span><span class="ct-e4d7f1">.</span><span class="ct-fb958d">Enabled</span><span class="ct-e4d7f1">(</span><span class="ct-c0fffb">limitDailyRequest</span><span class="ct-e4d7f1">: </span><span class="ct-8589f8">false</span><span class="ct-e4d7f1">)</span></span></code></pre><!--]--><h2 id="audit-auditing-persistent-classes"><!--[-->Auditing Persistent Classes<!--]--></h2><p><!--[-->To audit a persistent class, implement <code><!--[-->IAuditable<!--]--></code> interface and add the
<code><!--[-->AuditInfo<!--]--></code> type property to your persistent class. <code><!--[-->AuditInfo<!--]--></code> is a composite
user type that is mapped to 5 columns, <code><!--[-->CreateDate<!--]--></code>, <code><!--[-->CreateUserId<!--]--></code>,
<code><!--[-->ModifyDate<!--]--></code>, <code><!--[-->ModifyUserId<!--]--></code>, <code><!--[-->ModifyHost<!--]--></code>.<!--]--></p><p><!--[--><img src="features/-images/audit-info.png" alt=" "><!--]--></p><p><!--[--><code><!--[-->AuditInfo<!--]--></code> is readonly and values for these 5 properties are managed by this
feature automatically.<!--]--></p><ul><!--[--><li><!--[--><code><!--[-->CreateDate<!--]--></code>: The time this record is inserted<!--]--></li><li><!--[--><code><!--[-->CreateUserId<!--]--></code>: Id of the user in <code><!--[-->context.Session.Account<!--]--></code> when this record
is inserted<!--]--></li><li><!--[--><code><!--[-->ModifyDate<!--]--></code>: The last time this record is updated<!--]--></li><li><!--[--><code><!--[-->ModifyUserId<!--]--></code>: Id of the last user that updates this record<!--]--></li><li><!--[--><code><!--[-->ModifyHost<!--]--></code>: Value of <code><!--[-->context.Session.Host<!--]--></code> when this record is inserted or
updated<!--]--></li><!--]--></ul><p><!--[-->Below is a sample implementation of <code><!--[-->IAuditable<!--]--></code> interface;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">class</span><span class="ct-e4d7f1"> </span><span class="ct-430292">PersistentClass</span><span class="ct-e4d7f1"> : </span><span class="ct-430292">IAuditable</span></span><span class="line"><span class="ct-e4d7f1">{</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">private</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">readonly</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IRepository</span><span class="ct-e4d7f1">&lt;</span><span class="ct-430292">PersistentClass</span><span class="ct-e4d7f1">&gt; </span><span class="ct-c0fffb">_repository</span><span class="ct-e4d7f1">;</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">private</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">readonly</span><span class="ct-e4d7f1"> </span><span class="ct-430292">IModuleContext</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">_context</span><span class="ct-e4d7f1">;</span></span><span class="line"></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">protected</span><span class="ct-e4d7f1"> </span><span class="ct-fb958d">PersistentClass</span><span class="ct-e4d7f1">() { }</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-fb958d">PersistentClass</span><span class="ct-e4d7f1">(</span><span class="ct-430292">IRepository</span><span class="ct-e4d7f1">&lt;</span><span class="ct-430292">PersistentClass</span><span class="ct-e4d7f1">&gt; </span><span class="ct-c0fffb">repository</span><span class="ct-e4d7f1">, </span><span class="ct-430292">IModuleContext</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">context</span><span class="ct-e4d7f1">)</span></span><span class="line"><span class="ct-e4d7f1">    {</span></span><span class="line"><span class="ct-e4d7f1">        </span><span class="ct-c0fffb">_repository</span><span class="ct-e4d7f1"> = </span><span class="ct-c0fffb">repository</span><span class="ct-e4d7f1">;</span></span><span class="line"><span class="ct-e4d7f1">        </span><span class="ct-c0fffb">_context</span><span class="ct-e4d7f1"> = </span><span class="ct-c0fffb">context</span><span class="ct-e4d7f1">;</span></span><span class="line"><span class="ct-e4d7f1">    }</span></span><span class="line"></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">virtual</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">int</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">Id</span><span class="ct-e4d7f1"> { </span><span class="ct-8589f8">get</span><span class="ct-e4d7f1">; </span><span class="ct-8589f8">protected</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">set</span><span class="ct-e4d7f1">; }</span></span><span class="line"><span class="ct-e4d7f1">    </span><span class="ct-8589f8">public</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">virtual</span><span class="ct-e4d7f1"> </span><span class="ct-430292">AuditInfo</span><span class="ct-e4d7f1"> </span><span class="ct-c0fffb">AuditInfo</span><span class="ct-e4d7f1"> { </span><span class="ct-8589f8">get</span><span class="ct-e4d7f1">; </span><span class="ct-8589f8">protected</span><span class="ct-e4d7f1"> </span><span class="ct-8589f8">set</span><span class="ct-e4d7f1">; }</span></span><span class="line"><span class="ct-e4d7f1">}</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->When audit is disabled, <code><!--[-->IAuditable<!--]--></code> implementations will not cause any
error.<!--]--></p><!--]--><!--]--></div></div><style>.ct-8589f8{color:#569CD6}
.ct-430292{color:#4EC9B0}
.ct-fb958d{color:#DCDCAA}
.ct-c0fffb{color:#9CDCFE}
.ct-e4d7f1{color:#D4D4D4}
.ct-aed0fa{color:#C8C8C8}</style></div></section><section id="authentication"><div><h1 id="authentication"><!--[-->Authentication<!--]--></h1><p><!--[-->In this section, you will learn about how authentication is implemented in
Gazel.<!--]--></p><p><!--[-->Authentication is enabled by default in <em><!--[-->Service Application<!--]--></em>. All requests
from outside of your host project require an token. When you run your
<code><!--[-->App.Service<!--]--></code> project, you will see an <code><!--[-->Authorization<!--]--></code> text box in request
headers section which configures an HTTP authorization header for every
request.<!--]--></p><p><!--[--><img src="features/-images/authentication-service-test-ui.png" alt=" "><!--]--></p><p><!--[--><img src="features/-images/authentication-authorization-header.png" alt=" "><!--]--></p><p><!--[-->Below you can see a sequence diagram explaining how gazel interacts with
your code through interfaces;<!--]--></p><p><!--[--><img src="./features/authentication-1.png" alt="diagram"><!--]--></p><p><!--[-->Here you can see that for every request;<!--]--></p><ul><!--[--><li><!--[-->It first calls <code><!--[-->GetSession()<!--]--></code> to retrieve session object<!--]--></li><li><!--[-->Then it invokes <code><!--[-->Validate()<!--]--></code> to enable validation logic<!--]--></li><li><!--[-->If everything is ok, it sets your session object to request scope.<!--]--></li><!--]--></ul><h2 id="authentication-isessionmanager-interface"><!--[--><code><!--[-->ISessionManager<!--]--></code> interface<!--]--></h2><p><!--[-->When authentication is enabled, Gazel requires an implementation of
<code><!--[-->ISessionManager<!--]--></code> interface. Once you implement it in any module, it will be
registered automatically.<!--]--></p><p><!--[--><code><!--[-->ISessionManager<!--]--></code> is basically responsible for finding an <code><!--[-->ISession<!--]--></code> instance
from a given <code><!--[-->AppToken<!--]--></code>. An example implementation is as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">SessionManager</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">ISessionManager</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    ...</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISession</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">GetSession</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">) =&gt;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">Query</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Sessions</span><span class="ct-5f6b85">&gt;().</span><span class="ct-3681d7">SingleByAppToken</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">);</span></span><span class="line"><span class="ct-5f6b85">    ...</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->If you don&#39;t want <code><!--[-->GetSession<!--]--></code> method to be public, you can implement
<code><!--[-->ISessionManager<!--]--></code> explicitly.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">SessionManager</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">ISessionManager</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    ...</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISession</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">GetSession</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">) { ... }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    ...</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-cdc59f">ISession</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISessionManager</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">GetSession</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">) =&gt; </span><span class="ct-3681d7">GetSession</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">);</span></span><span class="line"><span class="ct-5f6b85">    ...</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><!--]--><!--]--></div></div><h2 id="authentication-isession-interface"><!--[--><code><!--[-->ISession<!--]--></code> interface<!--]--></h2><p><!--[-->Just like a web session, <code><!--[-->ISession<!--]--></code> represents a session of a user. Unlike a
web session it is not stored in cookies nor in a file. <code><!--[-->ISessionManager<!--]--></code>
creates it before every request and puts it in the request scope. After every
request, session instances are destroyed along with its request.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">interface</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISession</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Token</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; } </span><span class="ct-18e1fc">// The unique identifier of the session</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Host</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; } </span><span class="ct-18e1fc">// A text to represent client&#39;s host if needed</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-cdc59f">IAccount</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Account</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; } </span><span class="ct-18e1fc">// The account that this session is attached to</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">void</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Validate</span><span class="ct-5f6b85">(); </span><span class="ct-18e1fc">// The method that is invoked before every request</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><p><!--[-->Here is an example implementation of <code><!--[-->ISession<!--]--></code> interface;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">ISession</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Session</span><span class="ct-5f6b85">() { }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Session</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">, </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">int</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Id</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Token</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Account</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Host</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">DateTime</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">ExpireTime</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">internal</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">With</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">account</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">Account</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">account</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">Token</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">System</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">NewAppToken</span><span class="ct-5f6b85">();</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">Host</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Request</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Host</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">ToString</span><span class="ct-5f6b85">();</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">ExpireTime</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">System</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Now</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">AddMinutes</span><span class="ct-5f6b85">(</span><span class="ct-c85467">30</span><span class="ct-5f6b85">);</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">Insert</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">);</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-e5fd46">return</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">void</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Validate</span><span class="ct-5f6b85">()</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-e5fd46">if</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">ExpireTime</span><span class="ct-5f6b85"> &lt; </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">System</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Now</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">        {</span></span><span class="line"><span class="ct-5f6b85">            </span><span class="ct-e5fd46">throw</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">new</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">AuthenticationRequiredException</span><span class="ct-5f6b85">();</span></span><span class="line"><span class="ct-5f6b85">        }</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//implemented explicitly to return IAccount</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-cdc59f">IAccount</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISession</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Account</span><span class="ct-5f6b85"> =&gt; </span><span class="ct-3829c1">Account</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//implemented explicitly to make Validate protected</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">void</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">ISession</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">Validate</span><span class="ct-5f6b85">() =&gt; </span><span class="ct-3681d7">Validate</span><span class="ct-5f6b85">();</span></span><span class="line"><span class="ct-5f6b85">}</span></span><span class="line"></span><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Sessions</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">Query</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85">&gt;</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Sessions</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">) : </span><span class="ct-28d2cf">base</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">context</span><span class="ct-5f6b85">) { }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">internal</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">SingleByAppToken</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">AppToken</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">) =&gt;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3681d7">SingleBy</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">s</span><span class="ct-5f6b85"> =&gt; </span><span class="ct-3829c1">s</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">AppToken</span><span class="ct-5f6b85"> == </span><span class="ct-3829c1">appToken</span><span class="ct-5f6b85">);</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><h2 id="authentication-iaccount-interface"><!--[--><code><!--[-->IAccount<!--]--></code> interface<!--]--></h2><p><!--[--><code><!--[-->IAccount<!--]--></code> represents an account in your application.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">interface</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IAccount</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">int</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Id</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; } </span><span class="ct-18e1fc">// Id of the account</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">DisplayName</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; } </span><span class="ct-18e1fc">// A text to represent the account</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">// The method that is invoked before every request if authorization is enabled</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">bool</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">HasAccess</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IResource</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">resource</span><span class="ct-5f6b85">);</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><p><!--[-->Here is an example implementation of <code><!--[-->IAccount<!--]--></code> interface;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">IAccount</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Account</span><span class="ct-5f6b85">() { }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Account</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">, </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">int</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">Id</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">FullName</span><span class="ct-5f6b85"> { </span><span class="ct-28d2cf">get</span><span class="ct-5f6b85">; </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">set</span><span class="ct-5f6b85">; }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">internal</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">With</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">fullName</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">FullName</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">fullName</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">Insert</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">);</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-e5fd46">return</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//implemented explicitly to map DisplayName on FullName</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IAccount</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">DisplayName</span><span class="ct-5f6b85"> =&gt; </span><span class="ct-3829c1">FullName</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//give access to everything for this sample</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">bool</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IAccount</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">HasAccess</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IResource</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">resource</span><span class="ct-5f6b85">) =&gt; </span><span class="ct-28d2cf">true</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">}</span></span><span class="line"></span><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Accounts</span><span class="ct-5f6b85"> : </span><span class="ct-cdc59f">Query</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Account</span><span class="ct-5f6b85">&gt; { ... }</span></span></code></pre><!--]--><h2 id="authentication-accessing-user-session"><!--[-->Accessing User Session<!--]--></h2><p><!--[-->When you finish setting up your authentication mechanism, you can access user
session using <code><!--[-->IModuleContext.Session<!--]--></code> property.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">CompanyManager</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">CompanyManager</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">CreateCompany</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-e5fd46">return</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">New</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85">&gt;().</span><span class="ct-3681d7">With</span><span class="ct-5f6b85">(</span></span><span class="line"><span class="ct-5f6b85">           </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">: </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">,</span></span><span class="line"><span class="ct-5f6b85">           </span><span class="ct-3829c1">createdBy</span><span class="ct-5f6b85">: </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Session</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">Account</span><span class="ct-5f6b85">.</span><span class="ct-3829c1">DisplayName</span></span><span class="line"><span class="ct-5f6b85">        );</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><h2 id="authentication-overriding-current-session"><!--[-->Overriding Current Session<!--]--></h2><p><!--[-->You may need to override the session in some specific cases. You can use
<code><!--[-->IModuleContext.OverrideSession<!--]--></code> method as shown below.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">class</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Company</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">private</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">readonly</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Company</span><span class="ct-5f6b85">() { }</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">public</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">Company</span><span class="ct-5f6b85">(</span><span class="ct-cdc59f">IRepository</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85">&gt; </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">, </span><span class="ct-cdc59f">IModuleContext</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">repository</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">context</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">internal</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">With</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">, </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">address</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-18e1fc">//this level uses current session</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-18e1fc">//assume we need an admin session here</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-28d2cf">var</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">adminSession</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">New</span><span class="ct-5f6b85">&lt;</span><span class="ct-cdc59f">Session</span><span class="ct-5f6b85">&gt;().</span><span class="ct-3681d7">WithAdminRights</span><span class="ct-5f6b85">();</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">OverrideSession</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">adminSession</span><span class="ct-5f6b85">, () =&gt;</span></span><span class="line"><span class="ct-5f6b85">        {</span></span><span class="line"><span class="ct-5f6b85">            </span><span class="ct-18e1fc">//here _context.Session returns adminSession</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">            </span><span class="ct-18e1fc">//do some admin stuff</span></span><span class="line"><span class="ct-5f6b85">        });</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-18e1fc">//back to current session</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">Name</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">Address</span><span class="ct-5f6b85"> = </span><span class="ct-3829c1">address</span><span class="ct-5f6b85">;</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_repository</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">Insert</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">);</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-e5fd46">return</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">    }</span></span><span class="line"><span class="ct-5f6b85">}</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[--><code><!--[-->OverrideSession<!--]--></code> can be used nested. After each <code><!--[-->OverrideSession<!--]--></code> block
ends, previous session becomes accessible.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-5f6b85">...</span></span><span class="line"><span class="ct-28d2cf">protected</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">internal</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">virtual</span><span class="ct-5f6b85"> </span><span class="ct-cdc59f">Company</span><span class="ct-5f6b85"> </span><span class="ct-3681d7">With</span><span class="ct-5f6b85">(</span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">name</span><span class="ct-5f6b85">, </span><span class="ct-28d2cf">string</span><span class="ct-5f6b85"> </span><span class="ct-3829c1">address</span><span class="ct-5f6b85">)</span></span><span class="line"><span class="ct-5f6b85">{</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//this level uses current session</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">OverrideSession</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">innerSession</span><span class="ct-5f6b85">, () =&gt;</span></span><span class="line"><span class="ct-5f6b85">    {</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-18e1fc">//this level uses inner session</span></span><span class="line"><span class="ct-5f6b85">        </span><span class="ct-3829c1">_context</span><span class="ct-5f6b85">.</span><span class="ct-3681d7">OverrideSession</span><span class="ct-5f6b85">(</span><span class="ct-3829c1">nestedSession</span><span class="ct-5f6b85">, () =&gt;</span></span><span class="line"><span class="ct-5f6b85">        {</span></span><span class="line"><span class="ct-5f6b85">            </span><span class="ct-18e1fc">//this level uses nested session</span></span><span class="line"><span class="ct-5f6b85">        });</span></span><span class="line"><span class="ct-5f6b85">    });</span></span><span class="line"></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-18e1fc">//this level uses current session</span></span><span class="line"><span class="ct-5f6b85">    </span><span class="ct-e5fd46">return</span><span class="ct-5f6b85"> </span><span class="ct-28d2cf">this</span><span class="ct-5f6b85">;</span></span><span class="line"><span class="ct-5f6b85">}</span></span><span class="line"><span class="ct-5f6b85">...</span></span></code></pre><!--]--><!--]--><!--]--></div></div><style>.ct-e5fd46{color:#C586C0}
.ct-c85467{color:#B5CEA8}
.ct-18e1fc{color:#6A9955}
.ct-3829c1{color:#9CDCFE}
.ct-3681d7{color:#DCDCAA}
.ct-cdc59f{color:#4EC9B0}
.ct-5f6b85{color:#D4D4D4}
.ct-28d2cf{color:#569CD6}</style></div></section><section id="concurrency-limiter"><div><h1 id="concurrency-limiter"><!--[-->Concurrency Limiter<!--]--></h1><p><!--[-->Concurrency limiter provides a way to limit number of requests that are being
handled in parallel. To make this happen, Gazel makes use of
<a href="https://www.nuget.org/packages/Microsoft.AspNetCore.ConcurrencyLimiter" rel="nofollow" target="_blank"><!--[-->Microsoft.AspNetCore.ConcurrencyLimiter<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
package.<!--]--></p><h2 id="concurrency-limiter-configuration"><!--[-->Configuration<!--]--></h2><p><!--[-->There are two main settings;<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->MaxConcurrentRequests<!--]--></strong>: Maximum number of concurrent requests allowed from
outside of the application. Default is <code><!--[-->20<!--]--></code>. Your application will still be
able to accept <code><!--[-->context.Remote<!--]--></code> and queue callback requests internally.<!--]--></li><li><!--[--><strong><!--[-->RequestQueueLimit<!--]--></strong>: This is the limit of your wait queue. Default is
<code><!--[-->1000<!--]--></code>. When exceeded, your application will reject further requests with
<code><!--[-->503 Service Unavailable<!--]--></code>.<!--]--></li><!--]--></ul><p><!--[-->Below is a sample configuration;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-3684be">builder</span><span class="ct-915966">.</span><span class="ct-3684be">Services</span><span class="ct-915966">.</span><span class="ct-12c847">AddGazelServiceApplication</span><span class="ct-915966">(</span></span><span class="line"><span class="ct-915966">    ...</span></span><span class="line"><span class="ct-915966">    </span><span class="ct-3684be">concurrencyLimiter</span><span class="ct-915966">: </span><span class="ct-3684be">c</span><span class="ct-915966"> =&gt; </span><span class="ct-3684be">c</span><span class="ct-915966">.</span><span class="ct-12c847">AspNetCore</span><span class="ct-915966">(</span></span><span class="line"><span class="ct-915966">        </span><span class="ct-3684be">maxConcurrentRequests</span><span class="ct-915966">: </span><span class="ct-2c4f9b">20</span><span class="ct-915966">,</span></span><span class="line"><span class="ct-915966">        </span><span class="ct-3684be">requestQueueLimit</span><span class="ct-915966">: </span><span class="ct-2c4f9b">1000</span></span><span class="line"><span class="ct-915966">    ),</span></span><span class="line"><span class="ct-915966">    ...</span></span><span class="line"><span class="ct-915966">);</span></span></code></pre><!--]--><p><!--[-->You may want to reduce the number of concurrent requests for development
environment. To achieve this you can use settings file;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-2ef358">concurrencyLimiter</span><span class="ct-915966">: </span><span class="ct-3684be">c</span><span class="ct-915966"> =&gt; </span><span class="ct-3684be">c</span><span class="ct-915966">.</span><span class="ct-12c847">AspNetCore</span><span class="ct-915966">(</span></span><span class="line"><span class="ct-915966">    </span><span class="ct-3684be">maxConcurrentRequests</span><span class="ct-915966">: </span><span class="ct-3684be">cfg</span><span class="ct-915966">.</span><span class="ct-12c847">Setting</span><span class="ct-915966">(</span><span class="ct-d4fac3">&quot;ConcurrencyLimiter&quot;</span><span class="ct-915966">, </span><span class="ct-2c4f9b">20</span><span class="ct-915966">)</span></span><span class="line"><span class="ct-915966">),</span></span></code></pre><!--]--><h2 id="concurrency-limiter-thread-count-calculation"><!--[-->Thread Count Calculation<!--]--></h2><p><!--[-->Number of minimum threads is calculated using given <code><!--[-->MaxConcurrentRequests<!--]--></code>
value. For <code><!--[-->20<!--]--></code> concurrent requests;<!--]--></p><ul><!--[--><li><!--[-->Min threads is set to <code><!--[-->40<!--]--></code> worker, <code><!--[-->80<!--]--></code> completion port threads<!--]--></li><li><!--[-->Max threads is set to <code><!--[-->80<!--]--></code> worker, <code><!--[-->160<!--]--></code> completion port threads<!--]--></li><!--]--></ul><p><!--[-->This way we ensure that your application handles async call returns, internal
remote &amp; system calls and internal queue callbak requests for every request
from outside.<!--]--></p><style>.ct-d4fac3{color:#CE9178}
.ct-2ef358{color:#C8C8C8}
.ct-2c4f9b{color:#B5CEA8}
.ct-12c847{color:#DCDCAA}
.ct-915966{color:#D4D4D4}
.ct-3684be{color:#9CDCFE}</style></div></section><section id="crypto"><div><h1 id="crypto"><!--[-->Crypto<!--]--></h1><p><!--[-->Crypto feature provides a basic encryption/decryption capability to store
sensitive data in configuration file or database. It also provides an API to be
used in accepting an input in a more secure way. Let&#39;s dive in to see how you
can use this feature to make your back-end functionality more secure.<!--]--></p><h2 id="crypto-crypto-api"><!--[-->Crypto API<!--]--></h2><p><!--[-->This API consists of two main types <code><!--[-->ICryptographer<!--]--></code> and <code><!--[-->EncryptedString<!--]--></code>
providing ways to encrypt/decrypt data and represent encrypted data,
respectively.<!--]--></p><h3 id="crypto-icryptographer-interface"><!--[--><code><!--[-->ICryptographer<!--]--></code> interface<!--]--></h3><p><!--[-->This interface is a gateway facade to an underlying security mechanism provided
by .NET. Behind the scenes, this interface uses a <code><!--[-->X.509<!--]--></code> certificate with a an
<em><!--[-->public / private key pair<!--]--></em> (for more information see <a href="https://en.wikipedia.org/wiki/X.509" rel="nofollow" target="_blank"><!--[-->X.509<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> and <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" rel="nofollow" target="_blank"><!--[-->RSA<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a>).
This way you can make use of asymmetric encryption where needed. There are two
types of usage; <em><!--[-->Encrypt / Decrypt<!--]--></em> and <em><!--[-->Sign / Verify<!--]--></em>.<!--]--></p><h4 id="encrypt-decrypt"><!--[--><code><!--[-->Encrypt<!--]--></code> &amp; <code><!--[-->Decrypt<!--]--></code><!--]--></h4><p><!--[-->First and most basic type of usage is to encrypt data using the public key, and
decrypt it using the private key. For example, you can use this to encrypt
sensitive data to save it in somewhere unsafe so that you can retrieve and
decrypt it later.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">class</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">CryptoManager</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">private</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">readonly</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">ICryptographer</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-413ab0">FileManager</span><span class="ct-4357b6">(</span><span class="ct-8ecc4a">ICryptographer</span><span class="ct-4357b6"> </span><span class="ct-fa961e">crypto</span><span class="ct-4357b6">) =&gt; </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">crypto</span><span class="ct-4357b6">;</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Binary</span><span class="ct-4357b6"> </span><span class="ct-413ab0">GetSensitiveData</span><span class="ct-4357b6">()</span></span><span class="line"><span class="ct-4357b6">    {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ToUtf8Binary</span><span class="ct-4357b6">();</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Encrypt</span><span class="ct-4357b6">(</span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">bool</span><span class="ct-4357b6"> </span><span class="ct-413ab0">CheckSensitiveData</span><span class="ct-4357b6">(</span><span class="ct-8ecc4a">Binary</span><span class="ct-4357b6"> </span><span class="ct-fa961e">binary</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">    {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Decrypt</span><span class="ct-4357b6">(</span><span class="ct-fa961e">binary</span><span class="ct-4357b6">).</span><span class="ct-413ab0">ToUtf8String</span><span class="ct-4357b6">();</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> == </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You may share your public key with the outside world so that anyone with this
key can encrypt and send a sensitive information which can only be decrypted
by your back-end system.<!--]--></p><!--]--><!--]--></div></div><p><!--[--><code><!--[-->ICryptographer<!--]--></code> also has helper methods to make string conversions easier.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">...</span></span><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">string</span><span class="ct-4357b6"> </span><span class="ct-413ab0">GetSensitiveData</span><span class="ct-4357b6">()</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-f54709">// returns base64 representation of encrypted binary</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Encrypt</span><span class="ct-4357b6">(</span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">}</span></span><span class="line"></span><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">bool</span><span class="ct-4357b6"> </span><span class="ct-413ab0">CheckSensitiveData</span><span class="ct-4357b6">(</span><span class="ct-8d31fd">string</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encryptedSensitive</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">DecryptUnsecure</span><span class="ct-4357b6">(</span><span class="ct-fa961e">encryptedSensitive</span><span class="ct-4357b6">) == </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">}</span></span><span class="line"><span class="ct-4357b6">...</span></span></code></pre><!--]--><p><!--[-->Above code uses <code><!--[-->DecryptUnsecure<!--]--></code> method, which returns a regular string
object. There is also a <code><!--[-->Decrypt<!--]--></code> method which returns a <code><!--[-->SecureString<!--]--></code>.
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.securestring" rel="nofollow" target="_blank"><!--[-->SecureString<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> is a class that encrypts given string with a symmetric key and
stores in memory so that a it is safely kept in memory.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">...</span></span><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">bool</span><span class="ct-4357b6"> </span><span class="ct-413ab0">CheckSensitiveData</span><span class="ct-4357b6">(</span><span class="ct-8d31fd">string</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encryptedSensitive</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Decrypt</span><span class="ct-4357b6">(</span><span class="ct-fa961e">encryptedSensitive</span><span class="ct-4357b6">);</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Decrypt</span><span class="ct-4357b6">() == </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">}</span></span><span class="line"><span class="ct-4357b6">...</span></span></code></pre><!--]--><p><!--[-->Notice that data is decrypted twice; first time it is done by using your X.509
certificate, second time it is done on <code><!--[-->SecureString<!--]--></code> object by using a
symmetric key that .NET generates.<!--]--></p><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->This code is for demonstration purposes only. In a real life case you might
keep your sensitive data in a <code><!--[-->SecureString<!--]--></code> object, and pass it to a method
as a parameter or store in a property. This way it will be less likely to be
exposed. Decrypt a <code><!--[-->SecureString<!--]--></code> right before you use it in your code.<!--]--></p><!--]--><!--]--></div></div><h4 id="sign-verify"><!--[--><code><!--[-->Sign<!--]--></code> &amp; <code><!--[-->Verify<!--]--></code><!--]--></h4><p><!--[--><em><!--[-->Sign &amp; verify<!--]--></em> is like the opposite usage of <em><!--[-->encrypt &amp; decrypt<!--]--></em>. Decryption
can only happen on the side that has the private key, which is back-end side in
this case. So encryption is made with a public key, decryption is made with the
corresponding private key.<!--]--></p><p><!--[-->On the contrary, here, signing is done using a private key, and verifying is
done using its corresponding public key. So in this usage it&#39;s not about hiding
information from outside, rather it&#39;s about signing data to make it possible
for retrievers to verify that data is signed by, thus coming from, the trusted
source.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">...</span></span><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">string</span><span class="ct-4357b6">[] </span><span class="ct-413ab0">GetSignedData</span><span class="ct-4357b6">()</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-55d84f">&quot;something to be signed&quot;</span><span class="ct-4357b6">;</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">hasher</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">HashAlgorithm</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Create</span><span class="ct-4357b6">(</span><span class="ct-55d84f">&quot;SHA256&quot;</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">hasher</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ComputeHash</span><span class="ct-4357b6">(</span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ToUtf8Binary</span><span class="ct-4357b6">());</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-f54709">// Signing is done using the private key</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">signature</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Sign</span><span class="ct-4357b6">(</span><span class="ct-fa961e">hasher</span><span class="ct-4357b6">.</span><span class="ct-fa961e">Hash</span><span class="ct-4357b6">, </span><span class="ct-55d84f">&quot;SHA256&quot;</span><span class="ct-4357b6">);</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">new</span><span class="ct-4357b6">[] { </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">, </span><span class="ct-fa961e">signature</span><span class="ct-4357b6"> };</span></span><span class="line"><span class="ct-4357b6">}</span></span><span class="line"></span><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">bool</span><span class="ct-4357b6"> </span><span class="ct-413ab0">Verify</span><span class="ct-4357b6">(</span><span class="ct-8d31fd">string</span><span class="ct-4357b6">[] </span><span class="ct-fa961e">signedData</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">signedData</span><span class="ct-4357b6">[</span><span class="ct-d3794a">0</span><span class="ct-4357b6">];</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">signature</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">signedData</span><span class="ct-4357b6">[</span><span class="ct-d3794a">1</span><span class="ct-4357b6">];</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">hasher</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">HashAlgorithm</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Create</span><span class="ct-4357b6">(</span><span class="ct-55d84f">&quot;SHA256&quot;</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">hasher</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ComputeHash</span><span class="ct-4357b6">(</span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ToUtf8Binary</span><span class="ct-4357b6">());</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-f54709">// Verification is done with the public key</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Verify</span><span class="ct-4357b6">(</span><span class="ct-fa961e">hasher</span><span class="ct-4357b6">.</span><span class="ct-fa961e">Hash</span><span class="ct-4357b6">, </span><span class="ct-55d84f">&quot;SHA256&quot;</span><span class="ct-4357b6">, </span><span class="ct-fa961e">signature</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">}</span></span><span class="line"><span class="ct-4357b6">...</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Sign and verify is used in <a aria-current="page" href="/features#secure-call" class="router-link-active router-link-exact-active"><!--[-->Secure Call<!--]--> <!----></a> feature, where
response values are used to compute a hash to be signed so that client can
verify and trust response.<!--]--></p><!--]--><!--]--></div></div><h3 id="crypto-encryptedstring-struct"><!--[--><code><!--[-->EncryptedString<!--]--></code> struct<!--]--></h3><p><!--[-->This struct acts like a wrapper type for <code><!--[-->SecureString<!--]--></code> class from .NET, (see
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.securestring" rel="nofollow" target="_blank"><!--[-->SecureString<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a>). It conforms to the <em><!--[-->parseable value type<!--]--></em> convention just
like rest of the value types from <em><!--[-->Gazel.Primitives<!--]--></em> package. There are three ways to
create an <code><!--[-->EncryptedString<!--]--></code> instance.<!--]--></p><ol><!--[--><li><!--[--><code><!--[-->Parse<!--]--></code> method, when you have a plain string object;<!--[--><pre><code><span class="line"><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encrypted</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">EncryptedString</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Parse</span><span class="ct-4357b6">(</span><span class="ct-55d84f">&quot;something sensitive&quot;</span><span class="ct-4357b6">);</span></span></code></pre><!--]--><!--]--></li><li><!--[--><code><!--[-->FromEncrypted<!--]--></code> method, when you have an encrypted value;<!--[--><pre><code><span class="line"><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encrypted</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">EncryptedString</span><span class="ct-4357b6">.</span><span class="ct-413ab0">FromEncrypted</span><span class="ct-4357b6">(</span><span class="ct-fa961e">encryptedBinary</span><span class="ct-4357b6">, </span><span class="ct-fa961e">b</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">DecryptUnsecure</span><span class="ct-4357b6">(</span><span class="ct-fa961e">b</span><span class="ct-4357b6">));</span></span></code></pre><!--]-->Second parameter is <code><!--[-->decryptDelegate<!--]--></code> in case <code><!--[-->EncryptedString.Decrypt<!--]--></code> or
<code><!--[-->Encrypted.ToString()<!--]--></code> method are called on this instance. Without a decrypt
delegate it would not be able to decrpyt its value.<!--]--></li><li><!--[-->Use a <code><!--[-->SecureString<!--]--></code> instance. You can cast it to an <code><!--[-->EncryptedString<!--]--></code>;<!--[--><pre><code><span class="line"><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encrypted</span><span class="ct-4357b6"> = (</span><span class="ct-8ecc4a">EncryptedString</span><span class="ct-4357b6">)</span><span class="ct-fa961e">secureString</span><span class="ct-4357b6">;</span></span></code></pre><!--]-->or use constructor;<!--[--><pre><code><span class="line"><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">encrypted</span><span class="ct-4357b6"> = </span><span class="ct-8d31fd">new</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">EncryptedString</span><span class="ct-4357b6">(</span><span class="ct-fa961e">secureString</span><span class="ct-4357b6">);</span></span></code></pre><!--]--><!--]--></li><!--]--></ol><p><!--[-->This struct either stores given encrypted binary value, or a secure string
instance so that sensitive information is securly kept in memory. You may read
<em><!--[--><a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.securestring#HowSecure" rel="nofollow" target="_blank"><!--[-->How secure is SecureString<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a><!--]--></em> section from .NET documentation to learn more.<!--]--></p><h4 id="mapping-to-a-table-column"><!--[-->Mapping to a Table Column<!--]--></h4><p><!--[-->You can map <code><!--[-->EncryptedString<!--]--></code> just like any other value type.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">class</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Secret</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">virtual</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">int</span><span class="ct-4357b6"> </span><span class="ct-fa961e">Id</span><span class="ct-4357b6"> { </span><span class="ct-8d31fd">get</span><span class="ct-4357b6">; </span><span class="ct-8d31fd">protected</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">set</span><span class="ct-4357b6">; }</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">virtual</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">string</span><span class="ct-4357b6"> </span><span class="ct-fa961e">Name</span><span class="ct-4357b6"> { </span><span class="ct-8d31fd">get</span><span class="ct-4357b6">; </span><span class="ct-8d31fd">protected</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">set</span><span class="ct-4357b6">; }</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">virtual</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">EncryptedString</span><span class="ct-4357b6"> </span><span class="ct-fa961e">Value</span><span class="ct-4357b6"> { </span><span class="ct-8d31fd">get</span><span class="ct-4357b6">; </span><span class="ct-8d31fd">protected</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">set</span><span class="ct-4357b6">; }</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->If you intend to use an encrypted string property, <strong><!--[-->please read<!--]--></strong> below
information carefully;<!--]--></p><ul><!--[--><li><!--[-->Only encrypted binary value is stored in database so that nobody can see the
value without a proper certificate. So it is <strong><!--[-->highly recommended<!--]--></strong> for you
to use a <strong><!--[-->different<!--]--></strong> certificate for each environment (<em><!--[-->Development<!--]--></em>,
<em><!--[-->Production<!--]--></em> etc.), and <strong><!--[-->never<!--]--></strong> expose private key of your <em><!--[-->Production<!--]--></em>
certificate to the people that have access to your production database.<!--]--></li><li><!--[-->Value is not decrypted until you explicitly call <code><!--[-->Decrypt<!--]--></code> or <code><!--[-->ToString<!--]--></code>.
This is because decryption is costly and retrieving a list of persistent
objects should not decrypt automatically. <code><!--[-->DataAccessLayer<!--]--></code> uses
<code><!--[-->FromEncrypted<!--]--></code> method to create <code><!--[-->EncryptedString<!--]--></code> instances when data is
retrieved from database.<!--]--></li><li><!--[-->Since <code><!--[-->EncryptedString<!--]--></code> is expected to store sensitive data, it will never
appear in a response directly. So you don&#39;t need to make it <code><!--[-->protected internal<!--]--></code> or <code><!--[-->[Internal]<!--]--></code>.<!--]--></li><!--]--></ul><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Notice how Gazel does <strong><!--[-->not<!--]--></strong> decrypt an EncryptedString in any case. So if
your business logic somehow requires an encrypted string to be decrypted,
remember that you will need to either call <code><!--[-->ToString()<!--]--></code> or <code><!--[-->Decrypt()<!--]--></code> at
some point.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->Below is an example of how you can generate and store a sensitive information;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">class</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Secret</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">protected</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">internal</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">SecretToken</span><span class="ct-4357b6"> </span><span class="ct-413ab0">With</span><span class="ct-4357b6">(</span><span class="ct-8d31fd">string</span><span class="ct-4357b6"> </span><span class="ct-fa961e">name</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">    {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">Name</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">name</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">Value</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">EncryptedString</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Parse</span><span class="ct-4357b6">(</span><span class="ct-55d84f">$&quot;{</span><span class="ct-fa961e">system</span><span class="ct-55d84f">.</span><span class="ct-413ab0">NewGuid</span><span class="ct-55d84f">()}&quot;</span><span class="ct-4357b6">);</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">_repository</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Insert</span><span class="ct-4357b6">(</span><span class="ct-8d31fd">this</span><span class="ct-4357b6">);</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">this</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><h4 id="as-a-service-parameter"><!--[-->As a Service Parameter<!--]--></h4><p><!--[-->You may use <code><!--[-->EncryptedString<!--]--></code> as a service parameter just like any other value
type. Below you can see a simple example;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">class</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Secret</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">virtual</span><span class="ct-4357b6"> </span><span class="ct-8d31fd">void</span><span class="ct-4357b6"> </span><span class="ct-413ab0">UpdateValue</span><span class="ct-4357b6">(</span><span class="ct-8ecc4a">EncryptedString</span><span class="ct-4357b6"> </span><span class="ct-fa961e">value</span><span class="ct-4357b6">)</span></span><span class="line"><span class="ct-4357b6">    {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">Value</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">value</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">    ...</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><div class="alert alert-warning row"><div class="alert-message col"><i class="fa-solid fa-warning"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Beware that this does <strong><!--[-->not<!--]--></strong> encrypt the sensitive data when transferring
from client to your back-end. You can already achieve this through an HTTPS
connection. <code><!--[-->EncryptedString<!--]--></code> only helps you to secure this data using a
symmetric encryption when stored in memory and an asymmetric encryption when
stored in database.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->Although <code><!--[-->EncryptedString<!--]--></code> is accepted as a service parameter, a method that
returns <code><!--[-->EncryptedString<!--]--></code> cannot be registered as a business service (a.k.a.
operation), and cannot be called from outside. And also, a property with its
type as <code><!--[-->EncryptedString<!--]--></code> cannot be registered in service layer as a business
data as well.<!--]--></p><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->When a service one of the parameters of a service is <code><!--[-->EncryptedString<!--]--></code>, that
service is marked as sensitive and does <strong><!--[-->not<!--]--></strong> log its parameter and
response data.<!--]--></p><!--]--><!--]--></div></div><h4 id="reading-from-settings"><!--[-->Reading from Settings<!--]--></h4><p><!--[-->This feature allows you to read an encrypted string from settings using
<code><!--[-->GetEncryptedString<!--]--></code> method of <code><!--[-->ICryptographer<!--]--></code> interface. Let&#39;s revisit the
previous example from <a aria-current="page" href="/features#crypto-icryptographer-interface" class="router-link-active router-link-exact-active"><!--[-->ICryptographer Interface<!--]--> <!----></a>
section.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Binary</span><span class="ct-4357b6"> </span><span class="ct-413ab0">GetSensitiveData</span><span class="ct-4357b6">()</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6">.</span><span class="ct-413ab0">ToUtf8Binary</span><span class="ct-4357b6">();</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">Encrypt</span><span class="ct-4357b6">(</span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">);</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->Here you can see that sensitive information is exposed as a constant string,
which makes this sensitive information available to anyone who has access to
this code. To prevent this we can read it from settings.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-8d31fd">public</span><span class="ct-4357b6"> </span><span class="ct-8ecc4a">Binary</span><span class="ct-4357b6"> </span><span class="ct-413ab0">GetSensitiveData</span><span class="ct-4357b6">()</span></span><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-8d31fd">var</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6"> = </span><span class="ct-fa961e">_crypto</span><span class="ct-4357b6">.</span><span class="ct-413ab0">GetEncryptedString</span><span class="ct-4357b6">(</span><span class="ct-55d84f">&quot;Sensitive&quot;</span><span class="ct-4357b6">);</span></span><span class="line"></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-00b5aa">return</span><span class="ct-4357b6"> </span><span class="ct-fa961e">sensitive</span><span class="ct-4357b6">.</span><span class="ct-fa961e">EncryptedValue</span><span class="ct-4357b6">;</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->Encrypt a sensitive data using your certificate and put its encrypted value to
configuration file in base64 format. This way only someone with private key
will be able to know actual value of sensitive data.<!--]--></p><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->This method first looks for a value with given key. If value does not exist,
it will look for its decrypted version under <code><!--[-->&quot;Sensitive.Decrypted&quot;<!--]--></code> key, so
below file also works;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">  </span><span class="ct-fa961e">&quot;Sensitive&quot;</span><span class="ct-4357b6">: { </span><span class="ct-fa961e">&quot;Decrypted&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;something to hide&quot;</span><span class="ct-4357b6"> }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->This can be handy in development environemnt, when sensitive data is
sensitive only in production and you have some other not sensitive value in
development.<!--]--></p><!--]--><!--]--></div></div><h2 id="crypto-configuration"><!--[-->Configuration<!--]--></h2><p><!--[-->There are three ways to load a certificate, <code><!--[-->X509Store<!--]--></code>,
<code><!--[-->X509CertificateFromP12File<!--]--></code> and <code><!--[-->X509CertificateFromPem<!--]--></code>. There is also a
fourth, and the default, <code><!--[-->AutoResolve<!--]--></code> option which uses configuration file to
decide which one to use.<!--]--></p><h3 id="crypto-x509store"><!--[--><code><!--[-->X509Store<!--]--></code><!--]--></h3><p><!--[-->This option uses certificate store of operating system to load a certificate.
If you use this option you will have to install your certificate to every OS
that will run your back-end system.<!--]--></p><div class="alert alert-danger row"><div class="alert-message col"><i class="fa-solid fa-circle-xmark"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Currently this option is <strong><!--[-->only<!--]--></strong> supported in <strong><!--[-->Windows<!--]--></strong> operating systems.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->You can choose this option as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509Store</span><span class="ct-4357b6">()</span></span></code></pre><!--]--><p><!--[--><code><!--[-->X509Store<!--]--></code> requires <code><!--[-->storeName<!--]--></code> and <code><!--[-->storeLocation<!--]--></code> information to know in
which store to look for a certificate. It also requires an extra search
parameter to locate certificate in the specified store. By default this option
looks for <code><!--[-->StoreName<!--]--></code>, <code><!--[-->StoreLocation<!--]--></code> and <code><!--[-->SubjectName<!--]--></code> in configuration file
under <code><!--[-->Gazel.Certificate<!--]--></code> section like the following;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;StoreName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;TrustedPublisher&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;StoreLocation&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;LocalComputer&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;SubjectName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Gazel&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->If no configuration was given, <code><!--[-->storeName<!--]--></code> defaults to <code><!--[-->TrustedPublisher<!--]--></code>,
<code><!--[-->storeLocation<!--]--></code> defaults to <code><!--[-->LocalComputer<!--]--></code>. Possible values to these
parameters can be found at <a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.storename" rel="nofollow" target="_blank"><!--[-->StoreName<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.storelocation" rel="nofollow" target="_blank"><!--[-->StoreLocation<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> pages.<!--]--></p><p><!--[-->You can override this configuration directly from configurer as well;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509Store</span><span class="ct-4357b6">(</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">storeName</span><span class="ct-4357b6">: </span><span class="ct-fa961e">StoreName</span><span class="ct-4357b6">.</span><span class="ct-fa961e">TrustedPublisher</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">storeLocation</span><span class="ct-4357b6">: </span><span class="ct-fa961e">StoreLocation</span><span class="ct-4357b6">.</span><span class="ct-fa961e">LocalMachine</span></span><span class="line"><span class="ct-4357b6">)</span></span></code></pre><!--]--><p><!--[-->For the extra search parameter, you may give any of search criteria defined in
<a href="https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509findtype" rel="nofollow" target="_blank"><!--[-->X509FindType<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a>. All values of <code><!--[-->X509FindType<!--]--></code> enum starts with <code><!--[-->FindBy<!--]--></code>
prefix, which is removed in configuration keys. For example if you use
<code><!--[-->FindByIssuerName<!--]--></code> and use <code><!--[-->Inventiv<!--]--></code> as its value, you should change
configuration as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;StoreName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;TrustedPublisher&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;StoreLocation&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;LocalComputer&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;IssuerName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Inventiv&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You cannot override this extra search parameter from configurer like you do
it with <code><!--[-->storeName<!--]--></code> and <code><!--[-->storeLocation<!--]--></code> parameters. It has to be specified
from configuration file.<!--]--></p><!--]--><!--]--></div></div><h3 id="crypto-x509certificatefromp12file"><!--[--><code><!--[-->X509CertificateFromP12File<!--]--></code><!--]--></h3><p><!--[-->This option enables you to load a <a href="https://en.wikipedia.org/wiki/PKCS_12" rel="nofollow" target="_blank"><!--[-->PKCS #12<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> certificate from <code><!--[-->.p12<!--]--></code> file
using configured <code><!--[-->IFileSystem<!--]--></code> instance (see <a aria-current="page" href="/features#file-system" class="router-link-active router-link-exact-active"><!--[-->File System<!--]--> <!----></a>) and
suitable in non-Windows operating systems. Below code enables this option;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509CertificateFromP12File</span><span class="ct-4357b6">()</span></span></code></pre><!--]--><p><!--[-->It requires <code><!--[-->path<!--]--></code> and <code><!--[-->passwordFile<!--]--></code> information to load a certificate from
given path and use private key with the password specified in given password
file. By default it looks for <code><!--[-->Path<!--]--></code> and <code><!--[-->PasswordFile<!--]--></code> keys in configuration
under <code><!--[-->Gazel.Certificate<!--]--></code> section as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;Path&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Gazel.p12&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;PasswordFile&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;.CERTPASS&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->When configuration does not contain these keys, <code><!--[-->path<!--]--></code> defaults to <code><!--[-->Gazel.p12<!--]--></code>
and <code><!--[-->passwordFile<!--]--></code> defaults to <code><!--[-->.CERTPASS<!--]--></code>.<!--]--></p><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Private key password is asked to be in a separate file so that you can
include a certificate, such as a development certificate in your code
repository, but put <code><!--[-->.CERTPASS<!--]--></code> file in <code><!--[-->.gitignore<!--]--></code>. This will protect your
certificate even if you include it in your repository.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->You may override these configurations to be set directly from configurer;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509CertificateFromP12File</span><span class="ct-4357b6">(</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">path</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Inventiv.p12&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">passwordFile</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;.Inventiv.p12.pass&quot;</span></span><span class="line"><span class="ct-4357b6">)</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->We suggest you to use a hidden file for password files. In a unix-like
operating systems when a file starts with a dot, it means it is a hidden file
(see <a href="https://en.wikipedia.org/wiki/Dot_file" rel="nofollow" target="_blank"><!--[-->Dot file<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a>). In Windows operating systems you explicitly need to set a
file as hidden.<!--]--></p><!--]--><!--]--></div></div><h3 id="crypto-x509certificatefrompem"><!--[--><code><!--[-->X509CertificateFromPem<!--]--></code><!--]--></h3><p><!--[-->This option enables you to give certificate information directly from
configuration file or configurer. Gazel uses this option to register a stub
certificate during unit test runs. Below code enables this option;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509CertificateFromPem</span><span class="ct-4357b6">()</span></span></code></pre><!--]--><p><!--[-->This option requires <code><!--[-->certPem<!--]--></code>, <code><!--[-->keyPem<!--]--></code> and <code><!--[-->passwordFile<!--]--></code> information to be
used. By default it looks for these information configuration file using
<code><!--[-->CertPem<!--]--></code>, <code><!--[-->KeyPem<!--]--></code> and <code><!--[-->PasswordFile<!--]--></code> keys, respectively, under
<code><!--[-->Gazel.Certificate<!--]--></code> section. Certificate contents usually start with
<code><!--[-->-----BEGIN CERTIFICATE-----<!--]--></code> and has new lines in them. To handle this you
need to use <code><!--[-->\n<!--]--></code> character in json string, an example is as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;CertPem&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;-----BEGIN CERTIFICATE-----</span><span class="ct-fbb84d">\n</span><span class="ct-55d84f">MIIC7zCCAdegAwIBAgIQhaAixfnuiK5HBHMC+kz4zTANBgkqhkiG9w0BAQsFADAQ</span><span class="ct-fbb84d">\n</span><span class="ct-55d84f">MQ4wDAYDVQQDEwVHYXplbDAeFw0xODAxMTcxMDMxMDFaFw0zOTEyMzEyMzU5NTla...&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;KeyPem&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----</span><span class="ct-fbb84d">\n</span><span class="ct-55d84f">MIIFHDBOBgkqhkiG9w0BBQ0wQTApBgkqhkiG9w0BBQwwHAQIG7xEAxkSK6gCAggA</span><span class="ct-fbb84d">\n</span><span class="ct-55d84f">MAwGCCqGSIb3DQIJBQAwFAYIKoZIhvcNAwcECEmeebmmTgQsBIIEyJGTsjMc2869...&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;PasswordFile&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;.CERTPASS&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->Gazel does not have a default certificate so <code><!--[-->certPem<!--]--></code> and <code><!--[-->keyPem<!--]--></code> do not have
a default. Just like previous option, <code><!--[-->passwordFile<!--]--></code> defaults to <code><!--[-->.CERTPASS<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">X509CertificateFromPem</span><span class="ct-4357b6">(</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">certPem</span><span class="ct-4357b6">: </span><span class="ct-55d84f">@&quot;</span></span><span class="line"><span class="ct-55d84f">-----BEGIN CERTIFICATE-----</span></span><span class="line"><span class="ct-55d84f">MIIC7zCCAdegAwIBAgIQhaAixfnuiK5HBHMC+kz4zTANBgkqhkiG9w0BAQsFADAQ</span></span><span class="line"><span class="ct-55d84f">MQ4wDAYDVQQDEwVHYXplbDAeFw0xODAxMTcxMDMxMDFaFw0zOTEyMzEyMzU5NTla</span></span><span class="line"><span class="ct-55d84f">...</span></span><span class="line"><span class="ct-55d84f">-----END CERTIFICATE-----</span></span><span class="line"><span class="ct-55d84f">&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">keyPem</span><span class="ct-4357b6">: </span><span class="ct-55d84f">@&quot;</span></span><span class="line"><span class="ct-55d84f">-----BEGIN ENCRYPTED PRIVATE KEY-----</span></span><span class="line"><span class="ct-55d84f">MIIFHDBOBgkqhkiG9w0BBQ0wQTApBgkqhkiG9w0BBQwwHAQIG7xEAxkSK6gCAggA</span></span><span class="line"><span class="ct-55d84f">MAwGCCqGSIb3DQIJBQAwFAYIKoZIhvcNAwcECEmeebmmTgQsBIIEyJGTsjMc2869</span></span><span class="line"><span class="ct-55d84f">...</span></span><span class="line"><span class="ct-55d84f">-----END ENCRYPTED PRIVATE KEY-----</span></span><span class="line"><span class="ct-55d84f">&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">passwordFile</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;.CERTIFICATE_PASSWORD&quot;</span></span><span class="line"><span class="ct-4357b6">)</span></span></code></pre><!--]--><p><!--[-->Above example illustrates how you can override default configuratiion directly
from configurer.<!--]--></p><div class="alert alert-warning row"><div class="alert-message col"><i class="fa-solid fa-warning"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Configuring certificate directly from configurer is <strong><!--[-->not<!--]--></strong> recommended for
production code, because it may lead you to include production certificate
directly in source code. Production certificates are strongly recommended
<strong><!--[-->not<!--]--></strong> to be in your repository. If you choose <code><!--[-->X509CertificateFromPem<!--]--></code>
option, make sure you load certificate from configuration file and you don&#39;t
include <code><!--[-->Gazel.Certificate<!--]--></code> section of your production environment
configuration in your repository.<!--]--></p><!--]--><!--]--></div></div><h3 id="crypto-autoresolve"><!--[--><code><!--[-->AutoResolve<!--]--></code><!--]--></h3><p><!--[-->This option is the default option for crypto feature and enables you to
configure crypto feature completely through configuration file. You don&#39;t have
to select this option explicitly but you can still choose to do it as shown
below;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b6ace5">crypto</span><span class="ct-4357b6">: </span><span class="ct-fa961e">c</span><span class="ct-4357b6"> =&gt; </span><span class="ct-fa961e">c</span><span class="ct-4357b6">.</span><span class="ct-413ab0">AutoResolve</span><span class="ct-4357b6">()</span></span></code></pre><!--]--><p><!--[-->It does not accept any parameters. Default behaviour is to use <code><!--[-->X509Store<!--]--></code> on
Windows and <code><!--[-->X509CertificateFromP12File<!--]--></code> on unix-like operating systems. To
explicitly specify which option to use, you can add <code><!--[-->Type<!--]--></code> key under
<code><!--[-->Gazel.Certificate<!--]--></code> section;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;Type&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;X509Store&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->Option names are the same as previous sections; <code><!--[-->X509Store<!--]--></code>,
<code><!--[-->X509CertificateFromP12File<!--]--></code> and <code><!--[-->X509CertificateFromPem<!--]--></code>. Each option expects
its own keys as explained in previous sections. Below example uses store option
and specifies certificate information under same conffiguration section;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;Type&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;X509Store&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;SubjectName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Inventiv&quot;</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Combining options is also possible. Assume some people use Windows for
development and some use unix-like systems. Below example will be sufficient
to configure both at one place;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">{</span></span><span class="line"><span class="ct-4357b6">    </span><span class="ct-fa961e">&quot;Gazel&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">        </span><span class="ct-fa961e">&quot;Certificate&quot;</span><span class="ct-4357b6">: {</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;SubjectName&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Inventiv&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">            </span><span class="ct-fa961e">&quot;Path&quot;</span><span class="ct-4357b6">: </span><span class="ct-55d84f">&quot;Inventiv.p12&quot;</span><span class="ct-4357b6">,</span></span><span class="line"><span class="ct-4357b6">        }</span></span><span class="line"><span class="ct-4357b6">    }</span></span><span class="line"><span class="ct-4357b6">}</span></span></code></pre><!--]--><p><!--[-->This configuration will look for a certificate with subject name <code><!--[-->Inventiv<!--]--></code>
in trusted publisher and local machine for Windows operating systems, and
will look for a certificate <code><!--[-->Inventiv.p12<!--]--></code> in file system for unix-like
operating systems.<!--]--></p><!--]--><!--]--></div></div><h4 id="configuring-certificates-for-a-gazel-cli-process"><!--[-->Configuring certificates for a Gazel CLI process<!--]--></h4><p><!--[-->Gazel CLI allows you to generate a schema from a bin directory. When you use
this option Gazel CLI will render given bin directory including your
configuration files and configurers in your <code><!--[-->Program.cs<!--]--></code>. This means that if
you use crypto feature, especially in configuration files, it might require a
correct configuration for crypto feature as well.<!--]--></p><p><!--[-->Gazel CLI uses <code><!--[-->Development<!--]--></code> for environment by default. However if you face a
problem while generating schema, code or dll because of encryption problems,
you can make use of <code><!--[-->--environment<!--]--></code> option to set environment during Gazel CLI
process.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-4357b6">g </span><span class="ct-55d84f">schemagen</span><span class="ct-4357b6"> </span><span class="ct-55d84f">bin/net6.</span><span class="ct-d3794a">0</span><span class="ct-55d84f">/Debug</span><span class="ct-4357b6"> </span><span class="ct-55d84f">--environment</span><span class="ct-4357b6"> </span><span class="ct-55d84f">GazelCLI</span></span></code></pre><!--]--><p><!--[-->This, for example, sets environment to <code><!--[-->GazelCLI<!--]--></code> so that you can create a
<code><!--[-->appsettings.GazelCLI.json<!--]--></code> file and specify your certificate option in this
configuration under <code><!--[-->Gazel.Certificate<!--]--></code> section.<!--]--></p><style>.ct-fbb84d{color:#D7BA7D}
.ct-b6ace5{color:#C8C8C8}
.ct-d3794a{color:#B5CEA8}
.ct-f54709{color:#6A9955}
.ct-00b5aa{color:#C586C0}
.ct-55d84f{color:#CE9178}
.ct-413ab0{color:#DCDCAA}
.ct-fa961e{color:#9CDCFE}
.ct-8ecc4a{color:#4EC9B0}
.ct-4357b6{color:#D4D4D4}
.ct-8d31fd{color:#569CD6}</style></div></section><section id="exception-handling"><div><h1 id="exception-handling"><!--[-->Exception Handling<!--]--></h1><p><!--[-->Exception handling feature provides a way for your services to respond with a
code and a message for every request. To set an error code and message in your
response you simply implement an exception class that extends
<code><!--[-->ServiceException<!--]--></code> and throw an instance of that exception class in your
business code.<!--]--></p><p><!--[-->But before you start writing exception classes and use them right away, we want
to describe result code system in Gazel.<!--]--></p><h2 id="exception-handling-result-codes"><!--[-->Result Codes<!--]--></h2><p><!--[-->Result codes are reserved numbers starting from <code><!--[-->0<!--]--></code> to <code><!--[-->99999<!--]--></code> that will
represent a response status of a service in your system. There are 5 types of
result codes;<!--]--></p><table class="table"><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Type<!--]--></th><th><!--[-->Abbr.<!--]--></th><th><!--[-->Code Range<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->Success<!--]--></td><td><!--[-->-<!--]--></td><td><!--[--><code><!--[-->0<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Info<!--]--></td><td><!--[--><code><!--[-->INF<!--]--></code><!--]--></td><td><!--[--><code><!--[-->1 - 10000<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Warning<!--]--></td><td><!--[--><code><!--[-->WAR<!--]--></code><!--]--></td><td><!--[--><code><!--[-->10001 - 20000<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Error<!--]--></td><td><!--[--><code><!--[-->ERR<!--]--></code><!--]--></td><td><!--[--><code><!--[-->20001 - 90000<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->Fatal<!--]--></td><td><!--[-->-<!--]--></td><td><!--[--><code><!--[-->99999<!--]--></code><!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->These types are represented by <code><!--[-->ResultCodeType<!--]--></code> enum in <code><!--[-->Gazel.Service<!--]--></code>
namespace.<!--]--></p><!--]--><!--]--></div></div><h3 id="exception-handling-result-code-blocks"><!--[-->Result Code Blocks<!--]--></h3><p><!--[-->There are two main concerns about result codes that need to be addressed;<!--]--></p><ol><!--[--><li><!--[-->To be unique and static so that they can be documented<!--]--></li><li><!--[-->To be organized so that they are easily used<!--]--></li><!--]--></ol><p><!--[-->There are <code><!--[-->10K<!--]--></code> info, <code><!--[-->10K<!--]--></code> warning codes and <code><!--[-->70K<!--]--></code> error codes. To organize
these numbers without breaking uniqueness you may split those codes into
blocks, so that for every result code block there are <code><!--[-->100<!--]--></code> info, <code><!--[-->100<!--]--></code> warning
and <code><!--[-->700<!--]--></code> error codes. Here is the table for result codes organized using
result code blocks;<!--]--></p><table class="table"><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Block Index<!--]--></th><th><!--[-->Info<!--]--></th><th><!--[-->Warning<!--]--></th><th><!--[-->Error<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[--><em><!--[-->#0 (Reserved)<!--]--></em><!--]--></td><td><!--[--><code><!--[-->1 - 100<!--]--></code><!--]--></td><td><!--[--><code><!--[-->10001 - 10100<!--]--></code><!--]--></td><td><!--[--><code><!--[-->20001 - 20700<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><em><!--[-->#1<!--]--></em><!--]--></td><td><!--[--><code><!--[-->101 - 200<!--]--></code><!--]--></td><td><!--[--><code><!--[-->10101 - 10200<!--]--></code><!--]--></td><td><!--[--><code><!--[-->20701 - 21400<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><em><!--[-->#2<!--]--></em><!--]--></td><td><!--[--><code><!--[-->201 - 300<!--]--></code><!--]--></td><td><!--[--><code><!--[-->10201 - 10300<!--]--></code><!--]--></td><td><!--[--><code><!--[-->21401 - 22100<!--]--></code><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->...<!--]--></td><td><!--[--><!--]--></td><td><!--[--><!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[--><em><!--[-->#99<!--]--></em><!--]--></td><td><!--[--><code><!--[-->9901 - 10000<!--]--></code><!--]--></td><td><!--[--><code><!--[-->19901 - 20000<!--]--></code><!--]--></td><td><!--[--><code><!--[-->89301 - 90000<!--]--></code><!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Block <code><!--[-->0<!--]--></code> is reserved for built-in result codes such as <code><!--[-->20001 - Authentication Required<!--]--></code> etc. See <a aria-current="page" href="/features#exception-handling-built-in-errors" class="router-link-active router-link-exact-active"><!--[-->below section<!--]--> <!----></a> for all
built-in result codes of Gazel<!--]--></p><!--]--><!--]--></div></div><p><!--[-->To create a result code block extend <code><!--[-->ResultCodeBlocks<!--]--></code> class like this;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">ResultCodes</span><span class="ct-f56392"> : </span><span class="ct-44a62d">ResultCodeBlocks</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-288d88">readonly</span><span class="ct-f56392"> </span><span class="ct-44a62d">ResultCodeBlock</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392"> = </span><span class="ct-80c4da">CreateBlock</span><span class="ct-f56392">(</span><span class="ct-e7282b">1</span><span class="ct-f56392">, </span><span class="ct-dd0281">&quot;MyBlock&quot;</span><span class="ct-f56392">);</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You will use this class potentially from every business module, so it&#39;s
better for this to be included in the most base business module.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->Now that we&#39;ve created a block called <code><!--[-->MyBlock<!--]--></code> at index <code><!--[-->1<!--]--></code>, let&#39;s use this
block to create a unique result code within its code ranges;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-af6f15">using</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyProduct</span><span class="ct-f56392">.</span><span class="ct-44a62d">ResultCodes</span><span class="ct-f56392">;</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Info</span><span class="ct-f56392">(</span><span class="ct-e7282b">0</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 101</span></span><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Info</span><span class="ct-f56392">(</span><span class="ct-e7282b">10</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 111</span></span><span class="line"></span><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Warn</span><span class="ct-f56392">(</span><span class="ct-e7282b">0</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 10101</span></span><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Warn</span><span class="ct-f56392">(</span><span class="ct-e7282b">10</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 10111</span></span><span class="line"></span><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Err</span><span class="ct-f56392">(</span><span class="ct-e7282b">0</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 20701</span></span><span class="line"><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Err</span><span class="ct-f56392">(</span><span class="ct-e7282b">10</span><span class="ct-f56392">); </span><span class="ct-5fe23e">// 20711</span></span></code></pre><!--]--><p><!--[-->You may use one block per business module in your project. This way, errors
will be organized by the domain they belong to.<!--]--></p><h2 id="exception-handling-response-status"><!--[-->Response Status<!--]--></h2><p><!--[-->Response status is managed by <code><!--[-->Status<!--]--></code> property of <code><!--[-->IResponse<!--]--></code> to which you can
access through <code><!--[-->IModuleContext<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-b2a1a6">_context</span><span class="ct-f56392">.</span><span class="ct-b2a1a6">Response</span><span class="ct-f56392">.</span><span class="ct-b2a1a6">Status</span></span></code></pre><!--]--><p><!--[-->Type of this property is <code><!--[-->IResponseStatus<!--]--></code>, which is the interface to represent
all response statuses. There are 3 base classes that implements this interface;<!--]--></p><ul><!--[--><li><!--[--><code><!--[-->ServiceInformation<!--]--></code> for information<!--]--></li><li><!--[--><code><!--[-->ServiceWarning<!--]--></code> for warnings<!--]--></li><li><!--[--><code><!--[-->ServiceException<!--]--></code> for errors<!--]--></li><!--]--></ul><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->In service applications, <code><!--[-->ServiceInformation<!--]--></code> and <code><!--[-->ServiceWarning<!--]--></code> are
included in response headers along with the successful response body.
However, <code><!--[-->ServiceException<!--]--></code> is returned directly in the response body.<!--]--></p><!--]--><!--]--></div></div><h3 id="exception-handling-implementing-a-response-status"><!--[-->Implementing a response status<!--]--></h3><p><!--[-->For every message and status extend one of the response status base classes
with a proper result code.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-af6f15">using</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyProduct</span><span class="ct-f56392">.</span><span class="ct-44a62d">ResultCodes</span><span class="ct-f56392">;</span></span><span class="line"></span><span class="line"><span class="ct-f56392">...</span></span><span class="line"></span><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyExceptions</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">ThisIsWrong</span><span class="ct-f56392"> : </span><span class="ct-44a62d">ServiceException</span></span><span class="line"><span class="ct-f56392">    {</span></span><span class="line"><span class="ct-f56392">        </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-80c4da">ThisIsWrong</span><span class="ct-f56392">() : </span><span class="ct-288d88">base</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Err</span><span class="ct-f56392">(</span><span class="ct-e7282b">0</span><span class="ct-f56392">)) { }</span></span><span class="line"><span class="ct-f56392">    }</span></span><span class="line"><span class="ct-f56392">}</span></span><span class="line"></span><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyWarnings</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">YouAreWarned</span><span class="ct-f56392"> : </span><span class="ct-44a62d">ServiceWarning</span></span><span class="line"><span class="ct-f56392">    {</span></span><span class="line"><span class="ct-f56392">        </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-80c4da">YouAreWarned</span><span class="ct-f56392">() : </span><span class="ct-288d88">base</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Warn</span><span class="ct-f56392">(</span><span class="ct-e7282b">0</span><span class="ct-f56392">)) { }</span></span><span class="line"><span class="ct-f56392">    }</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Here you can see that we&#39;ve used a result code block <code><!--[-->MyBlock<!--]--></code> to give a
proper warning code.<!--]--></p><!--]--><!--]--></div></div><h3 id="exception-handling-throwing-exceptions"><!--[-->Throwing exceptions<!--]--></h3><p><!--[-->When you implement an exception class that extends <code><!--[-->ServiceException<!--]--></code> you may
throw it just like any .NET exception;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-af6f15">using</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyProduct</span><span class="ct-f56392">.</span><span class="ct-44a62d">MyExceptions</span><span class="ct-f56392">;</span></span><span class="line"></span><span class="line"><span class="ct-f56392">...</span></span><span class="line"></span><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyManager</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">void</span><span class="ct-f56392"> </span><span class="ct-80c4da">GiveMeError</span><span class="ct-f56392">()</span></span><span class="line"><span class="ct-f56392">    {</span></span><span class="line"><span class="ct-f56392">         </span><span class="ct-af6f15">throw</span><span class="ct-f56392"> </span><span class="ct-288d88">new</span><span class="ct-f56392"> </span><span class="ct-44a62d">ThisIsWrong</span><span class="ct-f56392">();</span></span><span class="line"><span class="ct-f56392">    }</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><p><!--[-->Exception handling mechanism catches this exception and automatically sets it
as a response status.<!--]--></p><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->When you throw an exception that is not a <code><!--[-->ServiceException<!--]--></code>, then it will be
treated as a fatal error with result code <code><!--[-->99999<!--]--></code>. To handle other exceptions
than <code><!--[-->ServiceException<!--]--></code> you need to implement a custom exception handler as
mentioned in <a aria-current="page" href="/features#exception-handling-customization" class="router-link-active router-link-exact-active"><!--[-->below section<!--]--> <!----></a>.<!--]--></p><!--]--><!--]--></div></div><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You may still catch this exception from your business code so that exception
handling mechanism is not triggered.<!--]--></p><!--]--><!--]--></div></div><h3 id="exception-handling-setting-response-status"><!--[-->Setting response status<!--]--></h3><p><!--[-->You may also directly set <code><!--[-->_context.Response.Status<!--]--></code> property with an
<code><!--[-->IResponseStatus<!--]--></code> instance. Below is an example of setting status to a warning;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-af6f15">using</span><span class="ct-f56392"> </span><span class="ct-288d88">static</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyProduct</span><span class="ct-f56392">.</span><span class="ct-44a62d">MyWarnings</span><span class="ct-f56392">;</span></span><span class="line"></span><span class="line"><span class="ct-f56392">...</span></span><span class="line"></span><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyManager</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">private</span><span class="ct-f56392"> </span><span class="ct-288d88">readonly</span><span class="ct-f56392"> </span><span class="ct-44a62d">IModuleContext</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">_context</span><span class="ct-f56392">;</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-80c4da">MyManager</span><span class="ct-f56392">(</span><span class="ct-44a62d">IModuleContext</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">context</span><span class="ct-f56392">) =&gt; </span><span class="ct-b2a1a6">_context</span><span class="ct-f56392"> = </span><span class="ct-b2a1a6">context</span><span class="ct-f56392">;</span></span><span class="line"></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">void</span><span class="ct-f56392"> </span><span class="ct-80c4da">GiveMeStatus</span><span class="ct-f56392">()</span></span><span class="line"><span class="ct-f56392">    {</span></span><span class="line"><span class="ct-f56392">        </span><span class="ct-b2a1a6">_context</span><span class="ct-f56392">.</span><span class="ct-b2a1a6">Response</span><span class="ct-f56392">.</span><span class="ct-b2a1a6">Status</span><span class="ct-f56392"> = </span><span class="ct-288d88">new</span><span class="ct-f56392"> </span><span class="ct-44a62d">YouAreWarned</span><span class="ct-f56392">();</span></span><span class="line"><span class="ct-f56392">    }</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><h3 id="exception-handling-log-levels"><!--[-->Log Levels<!--]--></h3><ul><!--[--><li><!--[-->Handled exceptions, responses with error codes, are logged in <strong><!--[-->Warning<!--]--></strong>
level.<!--]--></li><li><!--[-->Unhandled exceptions, responses with fatal code , are logged in <strong><!--[-->Error<!--]--></strong>
level.<!--]--></li><li><!--[-->Other statuses are not logged separately.<!--]--></li><!--]--></ul><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You may configure logging to only include error logs in production, so that
you can monitor unhandled errors in the production code.<!--]--></p><!--]--><!--]--></div></div><h3 id="exception-handling-localizing-messages"><!--[-->Localizing messages<!--]--></h3><p><!--[-->Every result code should have a corresponding message in localization.
Exception handling uses <code><!--[-->ILocalizer<!--]--></code> to retrieve message format using a key
with type and code such as <code><!--[-->ERR-20001<!--]--></code>, <code><!--[-->WAR-10001<!--]--></code>. Once message format is
retrieved, it is formatted using message parameters in response status object.<!--]--></p><p><!--[-->Let&#39;s say you defined another exception in <code><!--[-->MyBlock<!--]--></code>;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-f56392">...</span></span><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">RequiredParameter</span><span class="ct-f56392"> : </span><span class="ct-44a62d">ServiceException</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-80c4da">RequiredParameter</span><span class="ct-f56392">(</span><span class="ct-288d88">string</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">parameterName</span><span class="ct-f56392">) : </span><span class="ct-288d88">base</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">MyBlock</span><span class="ct-f56392">.</span><span class="ct-80c4da">Err</span><span class="ct-f56392">(</span><span class="ct-e7282b">1</span><span class="ct-f56392">), </span><span class="ct-b2a1a6">parameterName</span><span class="ct-f56392">) { }</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><p><!--[-->This would have a localization key <code><!--[-->ERR-20702<!--]--></code>.<!--]--></p><p><!--[-->Assume your localization has a message like this;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-b2a1a6">&quot;ERR-20702&quot;</span><span class="ct-f56392">: </span><span class="ct-dd0281">&quot;Parameter is required: &#39;{0}&#39;&quot;</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><p><!--[-->When you throw this exception;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">void</span><span class="ct-f56392"> </span><span class="ct-80c4da">CreateEmployee</span><span class="ct-f56392">(</span><span class="ct-288d88">string</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">ssid</span><span class="ct-f56392">)</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-af6f15">if</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">string</span><span class="ct-f56392">.</span><span class="ct-80c4da">IsNullOrWhitespace</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">ssid</span><span class="ct-f56392">))</span></span><span class="line"><span class="ct-f56392">    {</span></span><span class="line"><span class="ct-f56392">        </span><span class="ct-af6f15">throw</span><span class="ct-f56392"> </span><span class="ct-288d88">new</span><span class="ct-f56392"> </span><span class="ct-44a62d">RequiredParameter</span><span class="ct-f56392">(</span><span class="ct-288d88">nameof</span><span class="ct-f56392">(</span><span class="ct-b2a1a6">ssid</span><span class="ct-f56392">));</span></span><span class="line"><span class="ct-f56392">    }</span></span><span class="line"><span class="ct-f56392">    ...</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><p><!--[-->You will send a response with code <code><!--[-->20702<!--]--></code> and message;<!--]--></p><!--[--><pre><code><span class="line"><span>Parameter is required: &#39;ssid&#39;</span></span></code></pre><!--]--><h3 id="exception-handling-including-extra-data"><!--[-->Including extra data<!--]--></h3><p><!--[--><code><!--[-->ServiceException<!--]--></code> class has a special property called <code><!--[-->ExtraData<!--]--></code> to enable you
to include extra data along with code and message so that client applications can
use this information to handle some business logic in exception case.<!--]--></p><p><!--[-->Assume you have a <code><!--[-->Withdraw<!--]--></code> service that withdraws money from an account. You
may return current balance in extra data, when withdraw operation throws
insufficient balance exception so that client application can use it to provide
some further functionality.<!--]--></p><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Service applications include this informations in <code><!--[-->X-Extra-Data<!--]--></code> response
header. Other applications, e.g. api application, may not return this
information.<!--]--></p><!--]--><!--]--></div></div><h2 id="exception-handling-built-in-errors"><!--[-->Built-in Errors<!--]--></h2><p><!--[-->Below you can see built-in exceptions and their defined error codes;<!--]--></p><table class="table"><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Error Code<!--]--></th><th><!--[-->Error Type<!--]--></th><th><!--[-->HTTP Status Code<sup><a aria-current="page" href="/features#user-content-fn-2" class="router-link-active router-link-exact-active" aria-describedby="footnote-label" data-footnote-ref="true" id="user-content-fnref-2"><!--[-->1<!--]--> <!----></a></sup><!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->20001<!--]--></td><td><!--[-->AuthenticationRequiredException<!--]--></td><td><!--[--><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401" rel="nofollow" target="_blank"><!--[-->401<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20002<!--]--></td><td><!--[-->FormatException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20003<!--]--></td><td><!--[-->PermissionDeniedException<!--]--></td><td><!--[--><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403" rel="nofollow" target="_blank"><!--[-->403<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20004<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->CreditCardNumber<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20005<!--]--></td><td><!--[-->UriFormatException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20006<!--]--></td><td><!--[-->ObjectNotFoundException<!--]--></td><td><!--[--><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404" rel="nofollow" target="_blank"><!--[-->404<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20007<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->AppToken<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20008<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->CardNumber<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20009<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->CurrencyCode<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20010<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->DateRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20011<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Date<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20012<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Email<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20013<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->MoneyRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20014<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Money<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20015<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Tckn<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20016<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->TimeRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20017<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Time<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20018<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Vkn<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20019<!--]--></td><td><!--[-->InvalidEnumArgumentException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20020<!--]--></td><td><!--[-->RangeException&lt;<strong><!--[-->DateRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20021<!--]--></td><td><!--[-->RangeException&lt;<strong><!--[-->MoneyRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20022<!--]--></td><td><!--[-->RangeException&lt;<strong><!--[-->TimeRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20023<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->TriState<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20024<!--]--></td><td><!--[-->InvalidCurrencyException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20025<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Rate<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20026<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Timestamp<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20027<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->DateTime<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20028<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->DateTimeRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20029<!--]--></td><td><!--[-->RangeException&lt;<strong><!--[-->DateTimeRange<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20030<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Guid<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20031<!--]--></td><td><!--[-->RequestIdRequiredException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20032<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Binary<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20033<!--]--></td><td><!--[-->MaxDailyRequestCountExceededException<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20034<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Iban<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20035<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Geoloc<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20036<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->TimeSpan<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20037<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->VknOrTckn<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20038<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->MimeType<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20039<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->CountryCode<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20040<!--]--></td><td><!--[-->NotImplementedException<!--]--></td><td><!--[--><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/501" rel="nofollow" target="_blank"><!--[-->501<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a><sup><a aria-current="page" href="/features#user-content-fn-1" class="router-link-active router-link-exact-active" aria-describedby="footnote-label" data-footnote-ref="true" id="user-content-fnref-1"><!--[-->2<!--]--> <!----></a></sup><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20041<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->Password<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20042<!--]--></td><td><!--[-->FormatException&lt;<strong><!--[-->EncryptedString<!--]--></strong>&gt;<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20201<!--]--></td><td><!--[-->FrameworkExceptions.Remote<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->20202<!--]--></td><td><!--[-->FrameworkExceptions.InvalidSign<!--]--></td><td><!--[--><!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h3 id="exception-handling-information-and-warnings"><!--[-->Information and Warnings<!--]--></h3><table class="table"><!--[--><thead><!--[--><tr><!--[--><th><!--[-->Result Code<!--]--></th><th><!--[-->Response Status<!--]--></th><!--]--></tr><!--]--></thead><tbody><!--[--><tr><!--[--><td><!--[-->1<!--]--></td><td><!--[-->FrameworkInformations.Remote<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->10001<!--]--></td><td><!--[-->FrameworkWarnings.ObsoleteServiceCalled<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->10002<!--]--></td><td><!--[-->FrameworkWarnings.Remote<!--]--></td><!--]--></tr><tr><!--[--><td><!--[-->10003<!--]--></td><td><!--[-->FrameworkWarnings.GivenLanguageCodeIsNotSupported<!--]--></td><!--]--></tr><!--]--></tbody><!--]--></table><h2 id="exception-handling-customization"><!--[-->Customization<!--]--></h2><p><!--[-->Exception handling mechanism is a core feature of Gazel framework. You cannot
change the underlying mechanism nor you cannot disable it. However, you can
extend it to provide additional exception handlers.<!--]--></p><h3 id="exception-handling-creating-a-custom-handler"><!--[-->Creating a custom handler<!--]--></h3><p><!--[-->Exception handling is done through <code><!--[-->IExceptionHandler<!--]--></code> interface. If you want
to provide a custom mechanism to handle errors, you must implement this
interface and register it to <code><!--[-->IKernel<!--]--></code>.<!--]--></p><p><!--[-->When an exception is thrown, exception handling feature loops through all
exception handlers to find a way to convert the exception into
<code><!--[-->ServiceException<!--]--></code>. If it can, then it means exception is handled with an error
code, if it cannot, then it means it is an unhandled exception with the fatal
code.<!--]--></p><p><!--[-->Below is an example of a custom exception handler for <code><!--[-->ArgumentException<!--]--></code>;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">class</span><span class="ct-f56392"> </span><span class="ct-44a62d">MyHandler</span><span class="ct-f56392"> : </span><span class="ct-44a62d">IExceptionHandler</span></span><span class="line"><span class="ct-f56392">{</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-288d88">bool</span><span class="ct-f56392"> </span><span class="ct-80c4da">Handles</span><span class="ct-f56392">(</span><span class="ct-44a62d">Exception</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">ex</span><span class="ct-f56392">) =&gt; </span><span class="ct-b2a1a6">ex</span><span class="ct-f56392"> </span><span class="ct-288d88">is</span><span class="ct-f56392"> </span><span class="ct-44a62d">ArgumentException</span><span class="ct-f56392">;</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-288d88">public</span><span class="ct-f56392"> </span><span class="ct-44a62d">ServiceException</span><span class="ct-f56392"> </span><span class="ct-80c4da">Handle</span><span class="ct-f56392">(</span><span class="ct-44a62d">Exception</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">ex</span><span class="ct-f56392">) =&gt; </span><span class="ct-288d88">new</span><span class="ct-f56392"> </span><span class="ct-44a62d">ServiceException</span><span class="ct-f56392">(</span><span class="ct-e7282b">90001</span><span class="ct-f56392">)</span></span><span class="line"><span class="ct-f56392">    </span><span class="ct-b2a1a6">ExceptionInfo</span><span class="ct-f56392"> </span><span class="ct-80c4da">GetExceptionInfo</span><span class="ct-f56392">(</span><span class="ct-288d88">int</span><span class="ct-f56392"> </span><span class="ct-b2a1a6">resultCode</span><span class="ct-f56392">) =&gt;</span></span><span class="line"><span class="ct-f56392">        </span><span class="ct-b2a1a6">resultCode</span><span class="ct-f56392"> == </span><span class="ct-e7282b">90001</span></span><span class="line"><span class="ct-f56392">            ? </span><span class="ct-288d88">new</span><span class="ct-f56392"> </span><span class="ct-44a62d">ExceptionInfo</span><span class="ct-f56392">(</span><span class="ct-288d88">typeof</span><span class="ct-f56392">(</span><span class="ct-44a62d">ArgumentException</span><span class="ct-f56392">))</span></span><span class="line"><span class="ct-f56392">            : </span><span class="ct-288d88">null</span><span class="ct-f56392">;</span></span><span class="line"><span class="ct-f56392">}</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->If you implement a handler inside a module project, it will be automatically
registered to kernel so that exception handling can use your custom handler.<!--]--></p><!--]--><!--]--></div></div><section class="footnotes" data-footnotes="true"><h2 id="exception-handling-footnote-label" class="sr-only"><!--[-->Footnotes<!--]--></h2><ol><!--[--><li id="user-content-fn-2"><!--[-->All handled errors are <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400" rel="nofollow" target="_blank"><!--[-->400<!--]--> <i class="fa-solid fa-arrow-up-right-from-square"></i></a> unless indicated otherwise. <a aria-current="page" href="/features#user-content-fnref-2" class="router-link-active router-link-exact-active data-footnote-backref" aria-label="Back to content" data-footnote-backref="true"><!--[--><!--]--> <!----></a><!--]--></li><li id="user-content-fn-1"><!--[-->This mapping violates <code><!--[-->4xx<!--]--></code> rule for handled exceptions. This is intentional to provide you to throw a <code><!--[-->NotImplementedException<!--]--></code> anywhere without causing an error log. <a aria-current="page" href="/features#user-content-fnref-1" class="router-link-active router-link-exact-active data-footnote-backref" aria-label="Back to content" data-footnote-backref="true"><!--[--><!--]--> <!----></a><!--]--></li><!--]--></ol></section><style>.ct-5fe23e{color:#6A9955}
.ct-af6f15{color:#C586C0}
.ct-dd0281{color:#CE9178}
.ct-e7282b{color:#B5CEA8}
.ct-80c4da{color:#DCDCAA}
.ct-b2a1a6{color:#9CDCFE}
.ct-44a62d{color:#4EC9B0}
.ct-f56392{color:#D4D4D4}
.ct-288d88{color:#569CD6}</style></div></section><section id="file-system"><div><h1 id="file-system"><!--[-->File System<!--]--></h1><p><!--[-->File system feature basically enables you to read/write file content from/to a
file storage.<!--]--></p><h2 id="file-system-ifilesystem-interface"><!--[--><code><!--[-->IFileSystem<!--]--></code> interface<!--]--></h2><p><!--[-->When an application has this feature, you can directly inject <code><!--[-->IFileSystem<!--]--></code> interface
into your business objects. Below is a simple example;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-7ab86d">public</span><span class="ct-03e39e"> </span><span class="ct-7ab86d">class</span><span class="ct-03e39e"> </span><span class="ct-25c7e0">FileManager</span></span><span class="line"><span class="ct-03e39e">{</span></span><span class="line"><span class="ct-03e39e">    </span><span class="ct-7ab86d">private</span><span class="ct-03e39e"> </span><span class="ct-7ab86d">readonly</span><span class="ct-03e39e"> </span><span class="ct-25c7e0">IFileSystem</span><span class="ct-03e39e"> </span><span class="ct-45f71a">_file</span><span class="ct-03e39e">;</span></span><span class="line"><span class="ct-03e39e">    </span><span class="ct-7ab86d">public</span><span class="ct-03e39e"> </span><span class="ct-358a6c">FileManager</span><span class="ct-03e39e">(</span><span class="ct-25c7e0">IFileSystem</span><span class="ct-03e39e"> </span><span class="ct-45f71a">file</span><span class="ct-03e39e">) =&gt; </span><span class="ct-45f71a">_file</span><span class="ct-03e39e"> = </span><span class="ct-45f71a">file</span><span class="ct-03e39e">;</span></span><span class="line"></span><span class="line"><span class="ct-03e39e">    </span><span class="ct-7ab86d">public</span><span class="ct-03e39e"> await </span><span class="ct-25c7e0">Task</span><span class="ct-03e39e">&lt;</span><span class="ct-25c7e0">Binary</span><span class="ct-03e39e">&gt; </span><span class="ct-358a6c">FetchContent</span><span class="ct-03e39e">(</span><span class="ct-7ab86d">string</span><span class="ct-03e39e"> </span><span class="ct-45f71a">path</span><span class="ct-03e39e">)</span></span><span class="line"><span class="ct-03e39e">    {</span></span><span class="line"><span class="ct-03e39e">        </span><span class="ct-8daf45">return</span><span class="ct-03e39e"> </span><span class="ct-7ab86d">await</span><span class="ct-03e39e"> </span><span class="ct-45f71a">_file</span><span class="ct-03e39e">.</span><span class="ct-358a6c">ReadAsync</span><span class="ct-03e39e">(</span><span class="ct-45f71a">path</span><span class="ct-03e39e">);</span></span><span class="line"><span class="ct-03e39e">    }</span></span><span class="line"><span class="ct-03e39e">}</span></span></code></pre><!--]--><h2 id="file-system-configuration"><!--[-->Configuration<!--]--></h2><p><!--[-->Gazel has a built-in implementation that uses local storage.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-45f71a">builder</span><span class="ct-03e39e">.</span><span class="ct-45f71a">Services</span><span class="ct-03e39e">.</span><span class="ct-358a6c">AddGazelServiceApplication</span><span class="ct-03e39e">(</span></span><span class="line"><span class="ct-03e39e">    ...</span></span><span class="line"><span class="ct-03e39e">    </span><span class="ct-45f71a">fileSystem</span><span class="ct-03e39e">: </span><span class="ct-45f71a">c</span><span class="ct-03e39e"> =&gt; </span><span class="ct-45f71a">c</span><span class="ct-03e39e">.</span><span class="ct-358a6c">Local</span><span class="ct-03e39e">(</span><span class="ct-45f71a">rootPath</span><span class="ct-03e39e">: </span><span class="ct-cb38e8">&quot;files&quot;</span><span class="ct-03e39e">),</span></span><span class="line"><span class="ct-03e39e">    ...</span></span><span class="line"><span class="ct-03e39e">);</span></span></code></pre><!--]--><p><!--[-->When <code><!--[-->rootPath<!--]--></code> is given, all files will be stored under this folder. You might
pass an absolute path as well.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-45f71a">c</span><span class="ct-03e39e"> =&gt; </span><span class="ct-45f71a">c</span><span class="ct-03e39e">.</span><span class="ct-358a6c">Local</span><span class="ct-03e39e">(</span><span class="ct-45f71a">rootPath</span><span class="ct-03e39e">: </span><span class="ct-cb38e8">&quot;/absolute-path&quot;</span><span class="ct-03e39e">),</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Local storage makes sense for development environment. You may use a network
path by giving an absolute path as well.<!--]--></p><!--]--><!--]--></div></div><h2 id="file-system-customization"><!--[-->Customization<!--]--></h2><p><!--[-->When you want to store files in a different type of storage, you can implement
<code><!--[-->IFileSystem<!--]--></code> interface and register it using <code><!--[-->Custom<!--]--></code> configurer in
<code><!--[-->FileSystemConfigurer<!--]--></code>.<!--]--></p><p><!--[-->Assume you&#39;ve made an S3 implementation of file system interface, you can
register it as below;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-45f71a">c</span><span class="ct-03e39e"> =&gt; </span><span class="ct-45f71a">c</span><span class="ct-03e39e">.</span><span class="ct-358a6c">Custom</span><span class="ct-03e39e">&lt;</span><span class="ct-25c7e0">S3FileSystem</span><span class="ct-03e39e">&gt;()</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->If your implementation depends on some configuration, write a settings class,
register it to the IoC and inject it to the file system implementation.<!--]--></p><p><!--[-->For above example, write a class named <code><!--[-->S3Settings<!--]--></code> and inject it into
<code><!--[-->S3FileSystem<!--]--></code> class, and then register <code><!--[-->S3Settings<!--]--></code> to the kernel.<!--]--></p><!--]--><!--]--></div></div><style>.ct-cb38e8{color:#CE9178}
.ct-8daf45{color:#C586C0}
.ct-358a6c{color:#DCDCAA}
.ct-45f71a{color:#9CDCFE}
.ct-25c7e0{color:#4EC9B0}
.ct-03e39e{color:#D4D4D4}
.ct-7ab86d{color:#569CD6}</style></div></section><section id="configurations"><div><h1 id="configurations"><!--[-->Configurations<!--]--></h1><p><!--[-->Here you can find how to configure small features, <em><!--[-->Configurations<!--]--></em>. When
configuring an application you can always check which ones are available from
the optional parameters.<!--]--></p><p><!--[-->Every sample code in this section is in the same format as <code><!--[-->service<!--]--></code> feature
configuration shown below;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">service</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">  </span><span class="ct-48a300">serviceUrlBase</span><span class="ct-75f79b">: </span><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Localhost</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">7028</span><span class="ct-75f79b">)</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><p><!--[-->Examples will only include configuration line to avoid repetitive samples like
below;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-48a300">builder</span><span class="ct-75f79b">.</span><span class="ct-48a300">Services</span><span class="ct-75f79b">.</span><span class="ct-019216">AddGazelServiceApplication</span><span class="ct-75f79b">(</span><span class="ct-48a300">cfg</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">    ...</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">service</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">serviceUrlBase</span><span class="ct-75f79b">: </span><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Localhost</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">7028</span><span class="ct-75f79b">)</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">    ...</span></span><span class="line"><span class="ct-75f79b">);</span></span></code></pre><!--]--><h2 id="configurations-application-assemblies"><!--[-->Application Assemblies<!--]--></h2><p><!--[-->You may change which assemblies are used for an application via this
configuration. By default Gazel loads all assemblies starting with the root
namespace of your entry assembly. Assume your <code><!--[-->Program.cs<!--]--></code> is in a project
named <code><!--[-->MyCompany.MyComponent.App.Service<!--]--></code>, then the root namespace is
<code><!--[-->MyCompany<!--]--></code>.<!--]--></p><p><!--[-->Each application configurer has a configuration named <code><!--[-->applicationAssemblies<!--]--></code>
which provides <code><!--[-->Assemblies<!--]--></code> instance as a parameter and expects
<code><!--[-->List&lt;Assembly&gt;<!--]--></code> as a result. Below you can find default configuration;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationAssemblies</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-48a300">All</span></span></code></pre><!--]--><p><!--[-->There are several ways to determine which assemblies to use;<!--]--></p><h3 id="configurations-filtering-all"><!--[-->Filtering <code><!--[-->All<!--]--></code><!--]--></h3><p><!--[-->You can directly filter out unwanted assemblies returned by <code><!--[-->All<!--]--></code> property.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationAssemblies</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-48a300">All</span><span class="ct-75f79b">.</span><span class="ct-019216">Where</span><span class="ct-75f79b">(</span><span class="ct-48a300">predicate</span><span class="ct-75f79b">: </span><span class="ct-48a300">a</span><span class="ct-75f79b"> =&gt; !</span><span class="ct-48a300">a</span><span class="ct-75f79b">.</span><span class="ct-48a300">FullName</span><span class="ct-75f79b">.</span><span class="ct-019216">Contains</span><span class="ct-75f79b">(</span><span class="ct-48a300">value</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;Exclude&quot;</span><span class="ct-75f79b">)).</span><span class="ct-019216">ToList</span><span class="ct-75f79b">()</span></span></code></pre><!--]--><h3 id="configurations-find-by-namespace"><!--[-->Find By Namespace<!--]--></h3><p><!--[-->There is a method on <code><!--[-->Assemblies<!--]--></code> class called <code><!--[-->Find<!--]--></code> that takes a namespace
predicate as a parameter;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationAssemblies</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Find</span><span class="ct-75f79b">(</span><span class="ct-48a300">namespaceFilter</span><span class="ct-75f79b">: </span><span class="ct-48a300">ns</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">ns</span><span class="ct-75f79b">.</span><span class="ct-019216">StartsWith</span><span class="ct-75f79b">(</span><span class="ct-48a300">value</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;MyCompany&quot;</span><span class="ct-75f79b">))</span></span></code></pre><!--]--><h3 id="configurations-find-by-regex"><!--[-->Find By Regex<!--]--></h3><p><!--[-->You can also provide a namespace regex;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationAssemblies</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Find</span><span class="ct-75f79b">(</span><span class="ct-48a300">namespaceRegex</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;^MyCompany.*$&quot;</span><span class="ct-75f79b">)</span></span></code></pre><!--]--><h3 id="configurations-find-by-assemblytype"><!--[-->Find By <code><!--[-->AssemblyType<!--]--></code><!--]--></h3><p><!--[-->You can make use of <code><!--[-->AssemblyType<!--]--></code> class.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationAssemblies</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Find</span><span class="ct-75f79b">(</span><span class="ct-48a300">type</span><span class="ct-75f79b">: </span><span class="ct-48a300">AssemblyType</span><span class="ct-75f79b">.</span><span class="ct-48a300">Module</span><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[--><code><!--[-->c =&gt; c.Find(type: AssemblyType.All)<!--]--></code> is equivalent to <code><!--[-->c =&gt; c.All<!--]--></code><!--]--></p><!--]--><!--]--></div></div><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[--><code><!--[-->AssemblyType<!--]--></code> uses root namespace of your project that is resolved
automatically. You can access your root namespace programmatically via
<code><!--[-->AssemblyType.Root<!--]--></code> or <code><!--[-->Config.RootNamespace<!--]--></code>.<!--]--></p><!--]--><!--]--></div></div><h2 id="configurations-application-session"><!--[-->Application Session<!--]--></h2><p><!--[--><code><!--[-->ApplicationSessionConfiguration<!--]--></code> allows you to provide a token for a middle
application (such as <em><!--[-->Gateway Application<!--]--></em>) to be used when sending requests to
its backing application (such as <em><!--[-->Service Application<!--]--></em>). When there is a need
for your application to authenticate its requests to the other application
before a user session is established you can use this configuration.<!--]--></p><p><!--[-->You can find this configuration under <code><!--[-->applicationSession:<!--]--></code> parameter and
provide an <code><!--[-->AppToken<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationSession</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Use</span><span class="ct-75f79b">(</span><span class="ct-48a300">token</span><span class="ct-75f79b">: </span><span class="ct-48a300">cfg</span><span class="ct-75f79b">.</span><span class="ct-019216">Setting</span><span class="ct-75f79b">&lt;</span><span class="ct-2dfe01">AppToken</span><span class="ct-75f79b">&gt;(</span><span class="ct-29ed5f">&quot;ApplicationSession.Token&quot;</span><span class="ct-75f79b">))</span></span></code></pre><!--]--><p><!--[-->Or you can leave your application session token empty by using
<code><!--[-->UseEmptyToken()<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">applicationSession</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">UseEmptyToken</span><span class="ct-75f79b">()</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Default configuration uses <code><!--[-->UseEmptyToken()<!--]--></code>.<!--]--></p><!--]--><!--]--></div></div><h2 id="configurations-business-logic"><!--[-->Business Logic<!--]--></h2><p><!--[-->Using <code><!--[-->BusinessLogicConfiguration<!--]--></code> you can configure Routine&#39;s
<code><!--[-->developmentMode<!--]--></code> and <code><!--[-->maxFetchDepth<!--]--></code> options.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">businessLogic</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">  </span><span class="ct-48a300">developmentMode</span><span class="ct-75f79b">: </span><span class="ct-48a300">builder</span><span class="ct-75f79b">.</span><span class="ct-48a300">Environment</span><span class="ct-75f79b">.</span><span class="ct-019216">IsDevelopment</span><span class="ct-75f79b">(), </span><span class="ct-bb4b49">// defaults to false</span></span><span class="line"><span class="ct-75f79b">  </span><span class="ct-48a300">maxFetchDepth</span><span class="ct-75f79b">: </span><span class="ct-f1d4af">10</span><span class="ct-75f79b"> </span><span class="ct-bb4b49">// defaults to 10</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[--><code><!--[-->MaxFetchDepth<!--]--></code> is a parameter that limits service layer during json
serialization from going through all the relations to prevent a stack
overflow in case of a circular relation. This does <strong><!--[-->NOT<!--]--></strong> configure
NHibernate&#39;s eager fetch / lazy load mechanism.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->There is also an extra <code><!--[-->includeComponentNameInModuleName:<!--]--></code> option which enables
your application to use the component part of your module project as well as
its module name. To use this option your module projects must be named in this
convention: <code><!--[-->&lt;Company&gt;.&lt;Component&gt;.Module.&lt;ModuleName&gt;<!--]--></code>.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">businessLogic</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">  </span><span class="ct-48a300">includeComponentNameInModuleName</span><span class="ct-75f79b">: </span><span class="ct-d1e19a">true</span><span class="ct-75f79b"> </span><span class="ct-bb4b49">// defaults to false</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><p><!--[-->To give an example, if you have a module project named
<code><!--[-->Inventiv.Sample.Module.Todo<!--]--></code>, name of this module in service layer is <code><!--[-->Todo<!--]--></code>
by default. If you set this option to true, module name in service layer will
be <code><!--[-->Sample.Todo<!--]--></code>. It is useful when you have a large enough project with more
than one component.<!--]--></p><h2 id="configurations-command-line"><!--[-->Command Line<!--]--></h2><p><!--[-->Allows you to configure which assembly to use when searching for command
classes. You can use AssemblyType (similar to <a aria-current="page" href="/features#configurations-application-assemblies" class="router-link-active router-link-exact-active"><!--[-->Application
Assemblies<!--]--> <!----></a>) for this configuration.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">commandLine</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">CommandLineParser</span><span class="ct-75f79b">(</span><span class="ct-48a300">commandAssembly</span><span class="ct-75f79b">: </span><span class="ct-48a300">AssemblyType</span><span class="ct-75f79b">.</span><span class="ct-48a300">All</span><span class="ct-75f79b">),</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Default configurations uses <code><!--[-->AssemblyType.App<!--]--></code>, so it expects command classes
to be directly in the app project. App project names follow this convention:
<code><!--[-->&lt;Company&gt;.&lt;Component&gt;.App.&lt;AppName&gt;<!--]--></code>.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->For more information visit <a href="/architecture#layers-command-line-layer" class=""><!--[-->Command Line
Layer<!--]--> <!----></a>.<!--]--></p><h2 id="configurations-database"><!--[-->Database<!--]--></h2><div class="alert alert-secondary row"><!----><div class="col"><!--[--><!--[--><p><!--[-->TBD<!--]--></p><!--]--><!--]--></div></div><h2 id="configurations-gateway"><!--[-->Gateway<!--]--></h2><p><!--[-->Configures <a href="/architecture#layers-gateway-layer" class=""><!--[-->Gateway Layer<!--]--> <!----></a>. Serves
internal business services under given <code><!--[-->rootPath<!--]--></code>. You can also restrict access
to business services by using <code><!--[-->allow<!--]--></code> and <code><!--[-->deny<!--]--></code> regex patterns.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-bb4b49">// This sample configuration allows all services and denies nothing.</span></span><span class="line"><span class="ct-bb4b49">// Example url: http://localhost:5000/gw/{module}.{entity/query}/{business}</span></span><span class="line"><span class="ct-46ca0b">gateway</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">rootPath</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;gw&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">allow</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;.*&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">deny</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;^!$&quot;</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><p><!--[-->Default configuration serves under <code><!--[-->/<!--]--></code>, the root url of your application, and
allows every business service with no restriction.<!--]--></p><h2 id="configurations-http-header"><!--[-->Http Header<!--]--></h2><p><!--[-->HttpHeader configuration lets you expose custom headers in your public
application and map them to the headers of your internal business services.
Exposed headers are called <em><!--[-->public<!--]--></em> headers. Once mapped for every request they
will be forwarded to the business services using their <em><!--[-->internal<!--]--></em> header name.
<em><!--[-->Internal<!--]--></em> response headers will be mapped back to their corresponding <em><!--[-->public<!--]--></em>
header as well.<!--]--></p><p><!--[-->This configuration is an example for creating a custom request and response
headers;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">httpHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Custom</span><span class="ct-75f79b">(</span><span class="ct-48a300">h</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">h</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">RequestHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Public-Req&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Internal-Req&quot;</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ResponseHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Public-Res&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Internal-Res&quot;</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><p><!--[-->Below diagram illustrates mapping flow of this example;<!--]--></p><p><!--[--><img src="./features/configurations-1.png" alt="diagram"><!--]--></p><p><!--[-->You may also manipulate header value via a conversion function. Adding
conversion functions to configuration from previous example;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">httpHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Custom</span><span class="ct-75f79b">(</span><span class="ct-48a300">h</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">h</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">RequestHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Public-Req&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Internal-Req&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">conversionFunc</span><span class="ct-75f79b">: </span><span class="ct-48a300">public</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">public</span><span class="ct-75f79b">.</span><span class="ct-019216">ToUpperInvariant</span><span class="ct-75f79b">()</span></span><span class="line"><span class="ct-75f79b">    )</span><span class="ct-48a300">s</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ResponseHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Public-Res&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Internal-Res&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">        </span><span class="ct-48a300">conversionFunc</span><span class="ct-75f79b">: </span><span class="ct-48a300">internal</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">internal</span><span class="ct-75f79b">.</span><span class="ct-019216">ToLowerInvariant</span><span class="ct-75f79b">()</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-info row"><div class="alert-message col"><i class="fa-solid fa-circle-info"></i></div><div class="col"><!--[--><!--[--><p><!--[-->Notice that conversion function in request accepts public header value as its
parameter and returns internal header value, whereas in response it accepts
the internal response header value.<!--]--></p><!--]--><!--]--></div></div><p><!--[-->Below is another example to illustrate what you can achieve using this
configuration;<!--]--></p><p><!--[--><img src="features/-images/custom-request-header-postman.png" alt=" "><!--]--></p><p><!--[-->Configuration of this is as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">httpHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Custom</span><span class="ct-75f79b">(</span><span class="ct-48a300">h</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">h</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">RequestHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;Accept-Language&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">Header</span><span class="ct-75f79b">.</span><span class="ct-48a300">LanguageCode</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">conversionFunc</span><span class="ct-75f79b">: </span><span class="ct-48a300">header</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">header</span><span class="ct-75f79b">.</span><span class="ct-019216">Before</span><span class="ct-75f79b">(</span><span class="ct-29ed5f">&quot;,&quot;</span><span class="ct-75f79b">)</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-bb4b49">// Result code and result message headers are added by default.</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-bb4b49">// To override existing configuration, you need to clear response headers.</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ClearResponseHeaders</span><span class="ct-75f79b">()</span></span><span class="line"></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ResponseHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Code&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">Header</span><span class="ct-75f79b">.</span><span class="ct-48a300">ResultCode</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ResponseHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Description&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">Header</span><span class="ct-75f79b">.</span><span class="ct-48a300">ResultMessage</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">    .</span><span class="ct-019216">ResponseHeader</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">publicHeaderName</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;X-Link&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">internalHeader</span><span class="ct-75f79b">: </span><span class="ct-48a300">Header</span><span class="ct-75f79b">.</span><span class="ct-48a300">ResultCode</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">      </span><span class="ct-48a300">conversionFunc</span><span class="ct-75f79b">: </span><span class="ct-48a300">header</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">header</span><span class="ct-75f79b"> == </span><span class="ct-29ed5f">&quot;0&quot;</span><span class="ct-75f79b"> ? </span><span class="ct-d1e19a">null</span><span class="ct-75f79b"> : </span><span class="ct-29ed5f">$&quot;https://your-doc-site.com/result-codes/{</span><span class="ct-48a300">header</span><span class="ct-29ed5f">}&quot;</span></span><span class="line"><span class="ct-75f79b">    )</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->When header value is <code><!--[-->null<!--]--></code>, it will not be included in the response.<!--]--></p><!--]--><!--]--></div></div><h2 id="configurations-rest-api"><!--[-->Rest Api<!--]--></h2><div class="alert alert-secondary row"><!----><div class="col"><!--[--><!--[--><p><!--[-->TBD<!--]--></p><!--]--><!--]--></div></div><h2 id="configurations-service"><!--[-->Service<!--]--></h2><p><!--[-->You can configure service url base and request timeout values for a service
application to let it consume its own services as follows;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">service</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">serviceUrlBase</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;http://localhost:5000/service&quot;</span><span class="ct-75f79b">,</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">requestTimeout</span><span class="ct-75f79b">: </span><span class="ct-48a300">TimeSpan</span><span class="ct-75f79b">.</span><span class="ct-019216">FromSeconds</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">5.0</span><span class="ct-75f79b">)</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You may use <code><!--[-->ServiceUrl<!--]--></code> helper to build a service url base;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-bb4b49">// http://localhost:5000/service</span></span><span class="line"><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Localhost</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">5000</span><span class="ct-75f79b">)</span></span><span class="line"></span><span class="line"><span class="ct-bb4b49">// http://sample.inventiv.com.tr/service</span></span><span class="line"><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Build</span><span class="ct-75f79b">(</span><span class="ct-29ed5f">&quot;http://sample.inventiv.com.tr&quot;</span><span class="ct-75f79b">)</span></span></code></pre><!--]--><!--]--><!--]--></div></div><h2 id="configurations-service-client"><!--[-->Service Client<!--]--></h2><p><!--[-->Service client configuration allows you to configure a downstream service
application information;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-46ca0b">serviceClient</span><span class="ct-75f79b">: </span><span class="ct-48a300">c</span><span class="ct-75f79b"> =&gt; </span><span class="ct-48a300">c</span><span class="ct-75f79b">.</span><span class="ct-019216">Routine</span><span class="ct-75f79b">(</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">serviceUrlBase</span><span class="ct-75f79b">: </span><span class="ct-29ed5f">&quot;http://localhost:5000/service&quot;</span></span><span class="line"><span class="ct-75f79b">    </span><span class="ct-48a300">requestTimeout</span><span class="ct-75f79b">: </span><span class="ct-48a300">TimeSpan</span><span class="ct-75f79b">.</span><span class="ct-019216">FromSeconds</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">5.0</span><span class="ct-75f79b">)</span></span><span class="line"><span class="ct-75f79b">)</span></span></code></pre><!--]--><div class="alert alert-success row"><div class="alert-message col"><i class="fa-solid fa-lightbulb"></i></div><div class="col"><!--[--><!--[--><p><!--[-->You may use <code><!--[-->ServiceUrl<!--]--></code> helper to build a service url base;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-bb4b49">// http://localhost:5000/service</span></span><span class="line"><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Localhost</span><span class="ct-75f79b">(</span><span class="ct-f1d4af">5000</span><span class="ct-75f79b">)</span></span><span class="line"></span><span class="line"><span class="ct-bb4b49">// http://sample.inventiv.com.tr/service</span></span><span class="line"><span class="ct-48a300">ServiceUrl</span><span class="ct-75f79b">.</span><span class="ct-019216">Build</span><span class="ct-75f79b">(</span><span class="ct-29ed5f">&quot;http://sample.inventiv.com.tr&quot;</span><span class="ct-75f79b">)</span></span></code></pre><!--]--><!--]--><!--]--></div></div><style>.ct-d1e19a{color:#569CD6}
.ct-bb4b49{color:#6A9955}
.ct-2dfe01{color:#4EC9B0}
.ct-29ed5f{color:#CE9178}
.ct-f1d4af{color:#B5CEA8}
.ct-019216{color:#DCDCAA}
.ct-48a300{color:#9CDCFE}
.ct-75f79b{color:#D4D4D4}
.ct-46ca0b{color:#C8C8C8}</style></div></section><section id="options"><div><h1 id="options"><!--[-->Options<!--]--></h1><p><!--[--><em><!--[-->Options<!--]--></em> are features that you can only enable or disable. Below is a sample
option configuration;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-e57da3">// e.g. Decimal point has built in Always or AfterTwoDigits configuration options</span></span><span class="line"><span class="ct-56565c">decimalPoint</span><span class="ct-bed7f8">: </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8"> =&gt; </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8">.</span><span class="ct-8c7149">Always</span><span class="ct-bed7f8">()</span></span></code></pre><!--]--><h2 id="options-decimal-point"><!--[-->Decimal Point<!--]--></h2><p><!--[-->Decimal point lets you change the way <code><!--[-->Money<!--]--></code> and <code><!--[-->MoneyRange<!--]--></code> value types are
serialized in service layer. It gives you two options <code><!--[-->Always<!--]--></code> and
<code><!--[-->AfterTwoDigits<!--]--></code>, default configuration is <code><!--[-->Always()<!--]--></code>.<!--]--></p><p><!--[-->Use <code><!--[-->Always<!--]--></code>, when you always expect decimal point separator;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-e57da3">// While parsing, this option expects decimal point</span></span><span class="line"><span class="ct-e57da3">// only when there are decimal digits.</span></span><span class="line"><span class="ct-e57da3">// 100USD -&gt; $100</span></span><span class="line"><span class="ct-e57da3">// 1.00USD -&gt; $1.00</span></span><span class="line"></span><span class="line"><span class="ct-56565c">decimalPoint</span><span class="ct-bed7f8">: </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8"> =&gt; </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8">.</span><span class="ct-8c7149">Always</span><span class="ct-bed7f8">()</span></span></code></pre><!--]--><p><!--[-->Use <code><!--[-->AfterTwoDigits<!--]--></code> when you want last two digits to be treated automatically
as decimal digits;<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-e57da3">// While parsing, this option treats last two digits</span></span><span class="line"><span class="ct-e57da3">// as decimal digits even if there is no decimal point</span></span><span class="line"><span class="ct-e57da3">// separator and expect decimal point separator only</span></span><span class="line"><span class="ct-e57da3">// when there are more than two decimal digits</span></span><span class="line"><span class="ct-e57da3">// 100USD -&gt; $1.00</span></span><span class="line"><span class="ct-e57da3">// 1.001USD -&gt; $1.001</span></span><span class="line"></span><span class="line"><span class="ct-56565c">decimalPoint</span><span class="ct-bed7f8">: </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8"> =&gt; </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8">.</span><span class="ct-8c7149">AfterTwoDigits</span><span class="ct-bed7f8">(),</span></span></code></pre><!--]--><h2 id="options-utc"><!--[-->UTC<!--]--></h2><p><!--[-->You can choose if <code><!--[-->ISystem.Now<!--]--></code> property will use UTC time or local time using
this option.<!--]--></p><!--[--><pre><code><span class="line"><span class="ct-e57da3">// Uses Utc time</span></span><span class="line"><span class="ct-56565c">utc</span><span class="ct-bed7f8">: </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8"> =&gt; </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8">.</span><span class="ct-8c7149">UseUtcTime</span><span class="ct-bed7f8">()</span></span></code></pre><!--]--><!--[--><pre><code><span class="line"><span class="ct-e57da3">// Uses local time</span></span><span class="line"><span class="ct-56565c">utc</span><span class="ct-bed7f8">: </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8"> =&gt; </span><span class="ct-aaa6b4">c</span><span class="ct-bed7f8">.</span><span class="ct-8c7149">UseLocalTime</span><span class="ct-bed7f8">()</span></span></code></pre><!--]--><style>.ct-8c7149{color:#DCDCAA}
.ct-aaa6b4{color:#9CDCFE}
.ct-bed7f8{color:#D4D4D4}
.ct-56565c{color:#C8C8C8}
.ct-e57da3{color:#6A9955}</style></div></section><!--]--></div></div><!--]--><!--]--><!--]--><!--]--></div></div></div><!--]--></div><script type="module">import p from "/features/_payload.js";window.__NUXT__={...p,...((function(a,b,c,d){return {state:{$ssidebarActive:a},_errors:{},serverRendered:true,config:{public:{content:{locales:[],defaultLocale:b,integrity:1678264218587,experimental:{stripQueryParameters:a,clientDB:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"dark-plus",preload:["diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"]},wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:0,exclude:[1]}},baseUrl:c,components:{alert:{types:{none:{alertClass:"alert-secondary"},bulb:{alertClass:d,icon:"fa-lightbulb"},x:{alertClass:"alert-danger",icon:"fa-circle-xmark"},warning:{alertClass:"alert-warning",icon:"fa-warning"},white_check_mark:{alertClass:d,icon:"fa-circle-check"},information_source:{alertClass:"alert-info",icon:"fa-circle-info"}}}}},app:{baseURL:c,buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1678264233575}}(false,"","\u002F","alert-success")))}</script><script type="module" src="/_nuxt/entry.85e3ed78.js" crossorigin></script><script type="module" src="/_nuxt/default.a0d0be30.js" crossorigin></script><script type="module" src="/_nuxt/ContentQuery.8ba933ba.js" crossorigin></script><script type="module" src="/_nuxt/_...slug_.5e87b55e.js" crossorigin></script><script type="module" src="/_nuxt/ContentRenderer.0a66f51d.js" crossorigin></script><script type="module" src="/_nuxt/ContentRendererMarkdown.573c2c54.js" crossorigin></script><script type="module" src="/_nuxt/ProseH1.5fabf45d.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.52b53158.js" crossorigin></script><script type="module" src="/_nuxt/ProseEm.ddb44abf.js" crossorigin></script><script type="module" src="/_nuxt/ProseCodeInline.a96de7fe.js" crossorigin></script><script type="module" src="/_nuxt/ProseUl.ddff8cc6.js" crossorigin></script><script type="module" src="/_nuxt/ProseLi.5fb17151.js" crossorigin></script><script type="module" src="/_nuxt/ProseA.12fbe270.js" crossorigin></script><script type="module" src="/_nuxt/ProseStrong.e04bc725.js" crossorigin></script><script type="module" src="/_nuxt/ProseCode.9a069571.js" crossorigin></script><script type="module" src="/_nuxt/ProseBlockquote.fb3fa225.js" crossorigin></script><script type="module" src="/_nuxt/ProseH2.485a4720.js" crossorigin></script><script type="module" src="/_nuxt/ProseH3.99efbd7e.js" crossorigin></script><script type="module" src="/_nuxt/ProseImg.bb514741.js" crossorigin></script><script type="module" src="/_nuxt/ProseH4.377589e9.js" crossorigin></script><script type="module" src="/_nuxt/ProseOl.c264cad4.js" crossorigin></script><script type="module" src="/_nuxt/ProseTable.1caf5078.js" crossorigin></script><script type="module" src="/_nuxt/ProseThead.d3dad4c2.js" crossorigin></script><script type="module" src="/_nuxt/ProseTr.12023ae4.js" crossorigin></script><script type="module" src="/_nuxt/ProseTh.342cbb2a.js" crossorigin></script><script type="module" src="/_nuxt/ProseTbody.cb01ead8.js" crossorigin></script><script type="module" src="/_nuxt/ProseTd.4c093de2.js" crossorigin></script></body>
</html>